{{- $pageDir := urlize .Page.Path -}}
{{- $imageName := printf "%s" .Destination -}}
{{- $imagePath := printf "%s/%s" $pageDir $imageName -}}

{{- if .IsBlock -}}
  <figure>
    <img src="{{ $imagePath | safeURL }}"
      {{- with .PlainText }} alt="{{ . }}"{{ end -}}
        class="dark-image"
    >
    {{- with .Title }}<figcaption class="image-title">{{ . }}</figcaption>{{ end -}}
  </figure>
{{- else -}}
  <img src="{{ $imagePath | safeURL}}"
    {{- with .PlainText }} alt="{{ . }}"{{ end -}}
    {{- with .Title }} title="{{ . }}"{{ end -}}
    class="dark-image"
  >
{{- end -}}

<style>
  .dark-image {
    background-color: white;
  }

  .image-title {
    width: 50%;
    margin: auto;
  }
</style>
