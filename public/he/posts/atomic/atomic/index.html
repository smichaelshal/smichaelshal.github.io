<!DOCTYPE html>
<html lang="he" dir="rtl">

<head>
  <title>
  Atomic ¬∑ Michael Shalitin
</title>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="color-scheme" content="light dark">


<meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests; block-all-mixed-content; default-src 'self'; child-src 'self'; font-src 'self' https://fonts.gstatic.com https://cdn.jsdelivr.net/; form-action 'self'; frame-src 'self' https://www.youtube.com; img-src 'self'; object-src 'none'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com/ https://cdn.jsdelivr.net/; script-src 'self' 'unsafe-inline' default-src 'unsafe-eval' https://www.google-analytics.com https://cdn.jsdelivr.net/ https://static.cloudflareinsights.com https://cloudflareinsights.com; connect-src 'self' https://www.google-analytics.com https://static.cloudflareinsights.com https://cloudflareinsights.com;">




<meta name="author" content="Michael Shalitin">
<meta name="description" content="
  ◊û◊ë◊ï◊ê
  
    
    Link to heading
  

◊õ◊ê◊©◊® ◊û◊°◊§◊® thread-◊ô◊ù ◊û◊†◊°◊ô◊ù ◊ú◊©◊†◊ï◊™ ◊ë◊ï-◊ñ◊û◊†◊ô◊™ ◊ê◊™ ◊ê◊ï◊™◊ï ◊û◊ô◊ß◊ï◊ù ◊ë◊ñ◊ô◊õ◊®◊ï◊ü, ◊î◊û◊¢◊ë◊ì◊ô◊ù ◊ê◊ô◊†◊ù ◊û◊ë◊ò◊ô◊ó◊ô◊ù ◊™◊ï◊¶◊ê◊î ◊°◊§◊¶◊ô◊§◊ô◊™ ◊õ◊ú◊©◊î◊ô ◊õ◊™◊ï◊¶◊ê◊î ◊û◊î◊§◊¢◊ï◊ú◊î.
◊õ◊©◊ê◊†◊ó◊†◊ï ◊ê◊ï◊û◊®◊ô◊ù ◊©◊¢◊ì◊õ◊ï◊ü ◊û◊°◊ï◊í RMW, ◊õ◊û◊ï ◊ú◊û◊©◊ú atomic_inc(&amp;x), ◊î◊ï◊ê ◊ê◊ò◊ï◊û◊ô, ◊î◊õ◊ï◊ï◊†◊î ◊î◊ô◊ê ◊ú◊õ◊ö ◊©◊û◊ô◊ß◊ï◊ù ◊î◊ñ◊ô◊õ◊®◊ï◊ü (◊ë◊û◊ß◊®◊î ◊î◊ñ◊î, x) ◊ú◊ê ◊ô◊©◊™◊†◊î ◊ë◊ô◊ü ◊©◊ú◊ë◊ô ◊î◊ß◊®◊ô◊ê◊î ◊ï◊î◊õ◊™◊ô◊ë◊î ◊©◊û◊®◊õ◊ô◊ë◊ô◊ù ◊ê◊™ ◊î◊§◊¢◊ï◊ú◊î ◊î◊ê◊ò◊ï◊û◊ô◊™. ◊ë◊û◊ô◊ú◊ô◊ù ◊ê◊ó◊®◊ï◊™, ◊ê◊ù ◊©◊†◊ô ◊û◊¢◊ë◊ì◊ô◊ù ◊û◊ë◊¶◊¢◊ô◊ù ◊ê◊™ atomic_inc(&amp;x) ◊ë◊û◊ß◊ë◊ô◊ú, ◊ô◊© ◊ú◊ï◊ï◊ì◊ê ◊©◊î◊¢◊®◊ö ◊î◊°◊ï◊§◊ô ◊©◊ú x ◊ô◊î◊ô◊î ◊î◊¢◊®◊ö ◊î◊î◊™◊ó◊ú◊™◊ô ◊ë◊™◊ï◊°◊§◊™ 2.
◊ê◊ô◊ü ◊û◊¶◊ë ◊©◊ë◊ï ◊†◊ô◊™◊ü ◊ô◊î◊ô◊î ◊ú◊ß◊ë◊ú ◊®◊¶◊£ ◊ê◊ô◊®◊ï◊¢◊ô◊ù ◊õ◊ñ◊î:">
<meta name="keywords" content="blog,developer,personal">



  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Atomic">
  <meta name="twitter:description" content="◊û◊ë◊ï◊ê Link to heading ◊õ◊ê◊©◊® ◊û◊°◊§◊® thread-◊ô◊ù ◊û◊†◊°◊ô◊ù ◊ú◊©◊†◊ï◊™ ◊ë◊ï-◊ñ◊û◊†◊ô◊™ ◊ê◊™ ◊ê◊ï◊™◊ï ◊û◊ô◊ß◊ï◊ù ◊ë◊ñ◊ô◊õ◊®◊ï◊ü, ◊î◊û◊¢◊ë◊ì◊ô◊ù ◊ê◊ô◊†◊ù ◊û◊ë◊ò◊ô◊ó◊ô◊ù ◊™◊ï◊¶◊ê◊î ◊°◊§◊¶◊ô◊§◊ô◊™ ◊õ◊ú◊©◊î◊ô ◊õ◊™◊ï◊¶◊ê◊î ◊û◊î◊§◊¢◊ï◊ú◊î.
◊õ◊©◊ê◊†◊ó◊†◊ï ◊ê◊ï◊û◊®◊ô◊ù ◊©◊¢◊ì◊õ◊ï◊ü ◊û◊°◊ï◊í RMW, ◊õ◊û◊ï ◊ú◊û◊©◊ú atomic_inc(&amp;x), ◊î◊ï◊ê ◊ê◊ò◊ï◊û◊ô, ◊î◊õ◊ï◊ï◊†◊î ◊î◊ô◊ê ◊ú◊õ◊ö ◊©◊û◊ô◊ß◊ï◊ù ◊î◊ñ◊ô◊õ◊®◊ï◊ü (◊ë◊û◊ß◊®◊î ◊î◊ñ◊î, x) ◊ú◊ê ◊ô◊©◊™◊†◊î ◊ë◊ô◊ü ◊©◊ú◊ë◊ô ◊î◊ß◊®◊ô◊ê◊î ◊ï◊î◊õ◊™◊ô◊ë◊î ◊©◊û◊®◊õ◊ô◊ë◊ô◊ù ◊ê◊™ ◊î◊§◊¢◊ï◊ú◊î ◊î◊ê◊ò◊ï◊û◊ô◊™. ◊ë◊û◊ô◊ú◊ô◊ù ◊ê◊ó◊®◊ï◊™, ◊ê◊ù ◊©◊†◊ô ◊û◊¢◊ë◊ì◊ô◊ù ◊û◊ë◊¶◊¢◊ô◊ù ◊ê◊™ atomic_inc(&amp;x) ◊ë◊û◊ß◊ë◊ô◊ú, ◊ô◊© ◊ú◊ï◊ï◊ì◊ê ◊©◊î◊¢◊®◊ö ◊î◊°◊ï◊§◊ô ◊©◊ú x ◊ô◊î◊ô◊î ◊î◊¢◊®◊ö ◊î◊î◊™◊ó◊ú◊™◊ô ◊ë◊™◊ï◊°◊§◊™ 2. ◊ê◊ô◊ü ◊û◊¶◊ë ◊©◊ë◊ï ◊†◊ô◊™◊ü ◊ô◊î◊ô◊î ◊ú◊ß◊ë◊ú ◊®◊¶◊£ ◊ê◊ô◊®◊ï◊¢◊ô◊ù ◊õ◊ñ◊î:">

<meta property="og:url" content="https://smichaelshal.github.io/he/posts/atomic/atomic/">
  <meta property="og:site_name" content="Michael Shalitin">
  <meta property="og:title" content="Atomic">
  <meta property="og:description" content="◊û◊ë◊ï◊ê Link to heading ◊õ◊ê◊©◊® ◊û◊°◊§◊® thread-◊ô◊ù ◊û◊†◊°◊ô◊ù ◊ú◊©◊†◊ï◊™ ◊ë◊ï-◊ñ◊û◊†◊ô◊™ ◊ê◊™ ◊ê◊ï◊™◊ï ◊û◊ô◊ß◊ï◊ù ◊ë◊ñ◊ô◊õ◊®◊ï◊ü, ◊î◊û◊¢◊ë◊ì◊ô◊ù ◊ê◊ô◊†◊ù ◊û◊ë◊ò◊ô◊ó◊ô◊ù ◊™◊ï◊¶◊ê◊î ◊°◊§◊¶◊ô◊§◊ô◊™ ◊õ◊ú◊©◊î◊ô ◊õ◊™◊ï◊¶◊ê◊î ◊û◊î◊§◊¢◊ï◊ú◊î.
◊õ◊©◊ê◊†◊ó◊†◊ï ◊ê◊ï◊û◊®◊ô◊ù ◊©◊¢◊ì◊õ◊ï◊ü ◊û◊°◊ï◊í RMW, ◊õ◊û◊ï ◊ú◊û◊©◊ú atomic_inc(&amp;x), ◊î◊ï◊ê ◊ê◊ò◊ï◊û◊ô, ◊î◊õ◊ï◊ï◊†◊î ◊î◊ô◊ê ◊ú◊õ◊ö ◊©◊û◊ô◊ß◊ï◊ù ◊î◊ñ◊ô◊õ◊®◊ï◊ü (◊ë◊û◊ß◊®◊î ◊î◊ñ◊î, x) ◊ú◊ê ◊ô◊©◊™◊†◊î ◊ë◊ô◊ü ◊©◊ú◊ë◊ô ◊î◊ß◊®◊ô◊ê◊î ◊ï◊î◊õ◊™◊ô◊ë◊î ◊©◊û◊®◊õ◊ô◊ë◊ô◊ù ◊ê◊™ ◊î◊§◊¢◊ï◊ú◊î ◊î◊ê◊ò◊ï◊û◊ô◊™. ◊ë◊û◊ô◊ú◊ô◊ù ◊ê◊ó◊®◊ï◊™, ◊ê◊ù ◊©◊†◊ô ◊û◊¢◊ë◊ì◊ô◊ù ◊û◊ë◊¶◊¢◊ô◊ù ◊ê◊™ atomic_inc(&amp;x) ◊ë◊û◊ß◊ë◊ô◊ú, ◊ô◊© ◊ú◊ï◊ï◊ì◊ê ◊©◊î◊¢◊®◊ö ◊î◊°◊ï◊§◊ô ◊©◊ú x ◊ô◊î◊ô◊î ◊î◊¢◊®◊ö ◊î◊î◊™◊ó◊ú◊™◊ô ◊ë◊™◊ï◊°◊§◊™ 2. ◊ê◊ô◊ü ◊û◊¶◊ë ◊©◊ë◊ï ◊†◊ô◊™◊ü ◊ô◊î◊ô◊î ◊ú◊ß◊ë◊ú ◊®◊¶◊£ ◊ê◊ô◊®◊ï◊¢◊ô◊ù ◊õ◊ñ◊î:">
  <meta property="og:locale" content="he">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-08-10T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-08-10T00:00:00+00:00">
    <meta property="article:tag" content="Atomic">
    <meta property="article:tag" content="Cpu">
    <meta property="article:tag" content="Memory-Model">
    <meta property="article:tag" content="Cas">
    <meta property="article:tag" content="Sc">
    <meta property="article:tag" content="Tso">
      <meta property="og:see_also" content="https://smichaelshal.github.io/he/posts/atomic/x86-lock/">
      <meta property="og:see_also" content="https://smichaelshal.github.io/he/posts/atomic/exclusive/">




<link rel="canonical" href="https://smichaelshal.github.io/he/posts/atomic/atomic/">


<link rel="preload" href="/fonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin>


  
  
  <link rel="stylesheet" href="/css/coder.min.6c967191184c40e901e41977158c33a73a2cfa2d9413cf73dddd6732eeae7af4.css" integrity="sha256-bJZxkRhMQOkB5Bl3FYwzpzos&#43;i2UE89z3d1nMu6uevQ=" crossorigin="anonymous" media="screen" />






  
    
    
    <link rel="stylesheet" href="/css/coder-dark.min.a00e6364bacbc8266ad1cc81230774a1397198f8cfb7bcba29b7d6fcb54ce57f.css" integrity="sha256-oA5jZLrLyCZq0cyBIwd0oTlxmPjPt7y6KbfW/LVM5X8=" crossorigin="anonymous" media="screen" />
  



 




<link rel="icon" type="image/svg+xml" href="/images/favicon.svg" sizes="any">
<link rel="icon" type="image/png" href="/images/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/images/favicon-16x16.png" sizes="16x16">

<link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#5bbad5">









</head>






<body class="preload-transitions colorscheme-dark">
  
<div class="float-container">
    <a id="dark-mode-toggle" class="colorscheme-toggle">
        <i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i>
    </a>
</div>


  <main class="wrapper">
    <nav class="navigation">
  <section class="container">
    
    <a class="navigation-title" href="https://smichaelshal.github.io/he/">
      Michael Shalitin
    </a>
    
    
      <input type="checkbox" id="menu-toggle" />
      <label class="menu-button float-right" for="menu-toggle">
        <i class="fa-solid fa-bars fa-fw" aria-hidden="true"></i>
      </label>
      <ul class="navigation-list">
        
          
            <li class="navigation-item">
              <a class="navigation-link " href="/he/about/">About</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/he/posts/">Blog</a>
            </li>
          
        
        
          
          
          
            
              
                <li class="navigation-item menu-separator">
                  <span>|</span>
                </li>
                
              
              <li class="navigation-item">
                <a href="/posts/atomic/atomic/">üá¨üáß</a>
              </li>
            
          
        
      </ul>
    
  </section>
</nav>


    <div class="content">
      
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">
            <a class="title-link" href="https://smichaelshal.github.io/he/posts/atomic/atomic/">
              Atomic
            </a>
          </h1>
        </div>
        <div class="post-meta">
          <div class="date">
            <span class="posted-on">
              <i class="fa-solid fa-calendar" aria-hidden="true"></i>
              <time datetime="2024-08-10T00:00:00Z">
                ◊ê◊ï◊í◊ï◊°◊ò 10, 2024
              </time>
            </span>
            <span class="reading-time">
              <i class="fa-solid fa-newspaper" aria-hidden="true"></i>
              
                3244 ◊û◊ô◊ú◊ô◊ù
              
            </span>
          </div>
          
          <div class="categories">
  <i class="fa-solid fa-folder" aria-hidden="true"></i>
    <a href="/he/categories/atomic/">Atomic</a></div>

          <div class="tags">
  <i class="fa-solid fa-tag" aria-hidden="true"></i>
    <span class="tag">
      <a href="/he/tags/atomic/">Atomic</a>
    </span>
      <span class="separator">‚Ä¢</span>
    <span class="tag">
      <a href="/he/tags/cpu/">Cpu</a>
    </span>
      <span class="separator">‚Ä¢</span>
    <span class="tag">
      <a href="/he/tags/memory-model/">Memory-Model</a>
    </span>
      <span class="separator">‚Ä¢</span>
    <span class="tag">
      <a href="/he/tags/cas/">Cas</a>
    </span>
      <span class="separator">‚Ä¢</span>
    <span class="tag">
      <a href="/he/tags/sc/">Sc</a>
    </span>
      <span class="separator">‚Ä¢</span>
    <span class="tag">
      <a href="/he/tags/tso/">Tso</a>
    </span>
      <span class="separator">‚Ä¢</span>
    <span class="tag">
      <a href="/he/tags/lkmm/">Lkmm</a>
    </span>
      <span class="separator">‚Ä¢</span>
    <span class="tag">
      <a href="/he/tags/arm/">Arm</a>
    </span>
      <span class="separator">‚Ä¢</span>
    <span class="tag">
      <a href="/he/tags/x86/">X86</a>
    </span>
      <span class="separator">‚Ä¢</span>
    <span class="tag">
      <a href="/he/tags/rmw/">Rmw</a>
    </span></div>

        </div>
      </header>

      <div class="post-content">
        
        <h2 id="◊û◊ë◊ï◊ê">
  ◊û◊ë◊ï◊ê
  <a class="heading-link" href="#%d7%9e%d7%91%d7%95%d7%90">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>◊õ◊ê◊©◊® ◊û◊°◊§◊® thread-◊ô◊ù ◊û◊†◊°◊ô◊ù ◊ú◊©◊†◊ï◊™ ◊ë◊ï-◊ñ◊û◊†◊ô◊™ ◊ê◊™ ◊ê◊ï◊™◊ï ◊û◊ô◊ß◊ï◊ù ◊ë◊ñ◊ô◊õ◊®◊ï◊ü, ◊î◊û◊¢◊ë◊ì◊ô◊ù ◊ê◊ô◊†◊ù ◊û◊ë◊ò◊ô◊ó◊ô◊ù ◊™◊ï◊¶◊ê◊î ◊°◊§◊¶◊ô◊§◊ô◊™ ◊õ◊ú◊©◊î◊ô ◊õ◊™◊ï◊¶◊ê◊î ◊û◊î◊§◊¢◊ï◊ú◊î.</p>
<p>◊õ◊©◊ê◊†◊ó◊†◊ï ◊ê◊ï◊û◊®◊ô◊ù ◊©◊¢◊ì◊õ◊ï◊ü ◊û◊°◊ï◊í RMW, ◊õ◊û◊ï ◊ú◊û◊©◊ú <code>atomic_inc(&amp;x)</code>, ◊î◊ï◊ê ◊ê◊ò◊ï◊û◊ô, ◊î◊õ◊ï◊ï◊†◊î ◊î◊ô◊ê ◊ú◊õ◊ö ◊©◊û◊ô◊ß◊ï◊ù ◊î◊ñ◊ô◊õ◊®◊ï◊ü (◊ë◊û◊ß◊®◊î ◊î◊ñ◊î, <code>x</code>) ◊ú◊ê ◊ô◊©◊™◊†◊î ◊ë◊ô◊ü ◊©◊ú◊ë◊ô ◊î◊ß◊®◊ô◊ê◊î ◊ï◊î◊õ◊™◊ô◊ë◊î ◊©◊û◊®◊õ◊ô◊ë◊ô◊ù ◊ê◊™ ◊î◊§◊¢◊ï◊ú◊î ◊î◊ê◊ò◊ï◊û◊ô◊™. ◊ë◊û◊ô◊ú◊ô◊ù ◊ê◊ó◊®◊ï◊™, ◊ê◊ù ◊©◊†◊ô ◊û◊¢◊ë◊ì◊ô◊ù ◊û◊ë◊¶◊¢◊ô◊ù ◊ê◊™ <code>atomic_inc(&amp;x)</code> ◊ë◊û◊ß◊ë◊ô◊ú, ◊ô◊© ◊ú◊ï◊ï◊ì◊ê ◊©◊î◊¢◊®◊ö ◊î◊°◊ï◊§◊ô ◊©◊ú <code>x</code> ◊ô◊î◊ô◊î ◊î◊¢◊®◊ö ◊î◊î◊™◊ó◊ú◊™◊ô ◊ë◊™◊ï◊°◊§◊™ 2.
◊ê◊ô◊ü ◊û◊¶◊ë ◊©◊ë◊ï ◊†◊ô◊™◊ü ◊ô◊î◊ô◊î ◊ú◊ß◊ë◊ú ◊®◊¶◊£ ◊ê◊ô◊®◊ï◊¢◊ô◊ù ◊õ◊ñ◊î:</p>
<ul>
<li>◊û◊¢◊ë◊ì 0: ◊ß◊ï◊®◊ê ◊ê◊™ <code>x</code> ◊ï◊û◊ß◊ë◊ú 13;</li>
<li>◊û◊¢◊ë◊ì 1: ◊ß◊ï◊®◊ê ◊ê◊™ <code>x</code> ◊ï◊û◊ß◊ë◊ú 13;</li>
<li>◊û◊¢◊ë◊ì 0: ◊õ◊ï◊™◊ë 14 ◊ú<code>x</code>;</li>
<li>◊û◊¢◊ë◊ì 1: ◊õ◊ï◊™◊ë 14 ◊ú<code>x</code>.</li>
</ul>
<p>◊õ◊©◊î◊¢◊®◊ö ◊î◊°◊ï◊§◊ô ◊©◊ú <code>x</code> ◊©◊í◊ï◊ô (14 ◊ë◊û◊ß◊ï◊ù 15).</p>
<p>◊ë◊ì◊ï◊í◊û◊î ◊ñ◊ï, ◊î◊™◊ï◊°◊§◊™ ◊©◊ë◊ô◊¶◊¢ ◊û◊¢◊ë◊ì 0 ◊û◊™◊ë◊ò◊ú◊™ ◊ú◊û◊¢◊©◊î ◊û◊õ◊ô◊ï◊ï◊ü ◊©◊î◊ô◊ê ◊î◊™◊®◊ó◊©◊î ◊ë◊ô◊ü ◊©◊ú◊ë ◊î◊ß◊®◊ô◊ê◊î ◊ú◊©◊ú◊ë ◊î◊õ◊™◊ô◊ë◊î ◊©◊ú ◊û◊¢◊ë◊ì 1. ◊õ◊ú◊ï◊û◊®, ◊î◊ë◊¢◊ô◊î ◊î◊ô◊ê ◊©◊î◊õ◊™◊ô◊ë◊î ◊©◊ú ◊û◊¢◊ë◊ì 0 ◊û◊™◊ë◊¶◊¢◊™ ◊ë◊°◊ì◊® ◊î◊ß◊ï◊î◊®◊†◊ò◊ô◊ï◊™ ◊©◊ú <code>x</code> ◊ë◊ô◊ü ◊î◊õ◊™◊ô◊ë◊î ◊©◊û◊û◊†◊î ◊û◊¢◊ë◊ì 1 ◊ß◊ï◊®◊ê ◊ú◊ë◊ô◊ü ◊î◊õ◊™◊ô◊ë◊î ◊©◊ë◊ô◊¶◊¢ ◊û◊¢◊ë◊ì 1.</p>
<p>◊î◊°◊ë◊® ◊ú◊ì◊ï◊í◊û◊î ◊î◊ñ◊ê◊™ ◊ë◊î◊ß◊©◊® ◊©◊ú ◊û◊¢◊ë◊ì◊ô◊ù ◊û◊ï◊ì◊®◊†◊ô◊ù , ◊î◊ï◊ê ◊©◊ê◊ù ◊û◊ô◊ß◊ï◊ù ◊ë◊ñ◊ô◊õ◊®◊ï◊ü ◊†◊û◊¶◊ê ◊ë◊û◊¶◊ë Share (◊ë◊§◊®◊ï◊ò◊ï◊ß◊ï◊ú ◊û◊û◊©◊§◊ó◊™ MESI) ◊ï◊©◊†◊ô thread-◊ô◊ù ◊û◊†◊°◊ô◊ù ◊ú◊î◊í◊ì◊ô◊ú ◊ê◊™ ◊î◊¢◊®◊ö ◊ë◊ï-◊ñ◊û◊†◊ô◊™, pipeline ◊î◊ë◊ô◊¶◊ï◊¢ ◊ú◊ê ◊ó◊ô◊ô◊ë ◊ú◊î◊û◊™◊ô◊ü ◊¢◊ì ◊©◊î-cache line ◊™◊î◊ô◊î ◊ñ◊û◊ô◊†◊î ◊ë◊û◊¶◊ë Exclusive ◊õ◊ì◊ô ◊ú◊ß◊®◊ï◊ê ◊ê◊™ ◊î◊¢◊®◊ö ◊î◊†◊ï◊õ◊ó◊ô ◊û◊î-cache ◊ï◊ú◊ë◊¶◊¢ ◊ê◊™ ◊î◊î◊ï◊°◊§◊î. ◊ë◊û◊ß◊ï◊ù ◊ñ◊ê◊™, ◊î◊ï◊ê ◊¢◊©◊ï◊ô ◊ú◊ß◊®◊ï◊ê ◊ê◊™ ◊î◊¢◊®◊ö ◊©◊õ◊ë◊® ◊ß◊ô◊ô◊ù ◊ë-cache, ◊ï◊ë◊®◊í◊¢ ◊©◊î-cache line ◊î◊ï◊§◊õ◊™ ◊ú◊ñ◊û◊ô◊†◊î ◊ë◊û◊¶◊ë Exclusive, ◊î◊¢◊®◊ö ◊î◊û◊¢◊ï◊ì◊õ◊ü ◊†◊õ◊™◊ë ◊ë◊ó◊ñ◊®◊î ◊ú◊ñ◊ô◊õ◊®◊ï◊ü. ◊ê◊ï◊ú◊ù, ◊ë◊û◊¶◊ë ◊ë◊ï ◊©◊™◊ô ◊î◊ß◊®◊ô◊ê◊ï◊™ ◊û◊î-cache ◊û◊™◊ë◊¶◊¢◊ï◊™ ◊ë◊ï ◊ñ◊û◊†◊ô◊™, ◊ô◊ô◊™◊õ◊ü ◊©◊ê◊ó◊™ ◊û◊î◊™◊ï◊°◊§◊ï◊™ ◊™◊ê◊ë◊ì ◊ï◊î◊¢◊®◊ö ◊ú◊ê ◊ô◊™◊¢◊ì◊õ◊ü ◊õ◊®◊ê◊ï◊ô.</p>
<p>◊õ◊ì◊ô ◊ú◊û◊†◊ï◊¢ ◊û◊¶◊ë◊ô◊ù ◊õ◊ê◊ú◊ï, ◊û◊¢◊ë◊ì◊ô◊ù ◊û◊°◊§◊ß◊ô◊ù ◊§◊¢◊ï◊ú◊ï◊™ ◊ê◊ò◊ï◊û◊ô◊ï◊™. ◊§◊¢◊ï◊ú◊ï◊™ ◊ê◊ú◊ï ◊û◊ë◊ò◊ô◊ó◊ï◊™ ◊©◊ú◊ê ◊ô◊ô◊ß◊®◊ê ◊î◊¢◊®◊ö ◊î◊ß◊ï◊ì◊ù ◊¢◊ì ◊©◊†◊ô◊™◊ü ◊ô◊î◊ô◊î ◊ú◊ë◊¶◊¢ ◊ê◊™ ◊î◊§◊¢◊ï◊ú◊î ◊ë◊ê◊ï◊§◊ü ◊©◊ë◊ï ◊î◊™◊ï◊°◊§◊™ ◊ú◊û◊ô◊ß◊ï◊ù ◊ë◊ñ◊ô◊õ◊®◊ï◊ü ◊™◊ô◊®◊ê◊î ◊õ◊ê◊ô◊ú◊ï ◊ë◊ï◊¶◊¢◊î ◊ë◊ê◊ò◊ï◊û◊ô◊ï◊™. ◊ë◊†◊ï◊°◊£ ◊ú◊î◊û◊™◊†◊î ◊ú◊°◊ô◊†◊õ◊®◊ï◊ü ◊ë◊ô◊ü ◊î-cores ◊ê◊ï ◊ë◊ô◊ü ◊û◊¢◊ë◊ì◊ô◊ù ◊©◊ï◊†◊ô◊ù, ◊ô◊©◊†◊ù ◊û◊¢◊ë◊ì◊ô◊ù ◊ê◊©◊® ◊û◊ê◊ï◊™◊™◊ô◊ù ◊ú◊î◊™◊ß◊†◊ô◊ù ◊†◊ï◊°◊§◊ô◊ù ◊¢◊ú ◊ë◊ô◊¶◊ï◊¢ ◊§◊¢◊ï◊ú◊ï◊™ ◊ê◊ò◊ï◊û◊ô◊ï◊™ ◊¢◊ú ◊õ◊™◊ï◊ë◊ï◊™ ◊û◊°◊ï◊ô◊û◊ï◊™ ◊ë◊ñ◊ô◊õ◊®◊ï◊ü. ◊õ◊ú ◊ê◊ú◊ï ◊í◊ï◊®◊û◊ô◊ù ◊ú◊§◊¢◊ï◊ú◊ï◊™ ◊ê◊ò◊ï◊û◊ô◊ï◊™ ◊ú◊î◊ô◊ï◊™ ◊ê◊ô◊ò◊ô◊ï◊™ ◊ô◊ï◊™◊®.</p>
<h2 id="◊°◊ï◊í◊ô-◊§◊¢◊ï◊ú◊ï◊™-◊ê◊ò◊ï◊û◊ô◊ï◊™">
  ◊°◊ï◊í◊ô ◊§◊¢◊ï◊ú◊ï◊™ ◊ê◊ò◊ï◊û◊ô◊ï◊™
  <a class="heading-link" href="#%d7%a1%d7%95%d7%92%d7%99-%d7%a4%d7%a2%d7%95%d7%9c%d7%95%d7%aa-%d7%90%d7%98%d7%95%d7%9e%d7%99%d7%95%d7%aa">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<h3 id="bit-test">
  Bit Test
  <a class="heading-link" href="#bit-test">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>◊§◊¢◊ï◊ú◊ï◊™ ◊ê◊ú◊î ◊ß◊ï◊ë◊¢◊ï◊™ ◊ê◊ï ◊û◊†◊ß◊ï◊™ ◊ë◊ô◊ò ◊û◊°◊ï◊ô◊ù ◊ë◊ñ◊ô◊õ◊®◊ï◊ü ◊ë◊ê◊ï◊§◊ü ◊ê◊ò◊ï◊û◊ô ◊ï◊û◊ó◊ñ◊ô◊®◊ï◊™ ◊°◊ò◊ò◊ï◊° ◊î◊û◊¶◊ë◊ô◊¢ ◊¢◊ú ◊î◊ê◊ù ◊î◊ë◊ô◊ò ◊î◊ô◊î ◊û◊ï◊í◊ì◊® ◊ú◊§◊†◊ô ◊î◊©◊ô◊†◊ï◊ô ◊ê◊ï ◊ú◊ê.</p>
<h3 id="load-lockstore-conditional-llsc">
  Load Lock/Store Conditional (LL/SC)
  <a class="heading-link" href="#load-lockstore-conditional-llsc">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>◊§◊¢◊ï◊ú◊ï◊™ ◊ê◊ú◊ï ◊§◊ï◊¢◊ú◊ï◊™ ◊ë◊ñ◊ï◊í: ◊î◊ï◊®◊ê◊™ ◊î-load ◊î◊û◊ô◊ï◊ó◊ì◊™ ◊û◊©◊û◊©◊™ ◊ú◊î◊™◊ó◊ú◊™ ◊î◊§◊¢◊ï◊ú◊î, ◊ï◊î-store ◊î◊°◊ï◊§◊ô ◊ô◊¶◊ú◊ô◊ó ◊®◊ß ◊ê◊ù ◊î◊û◊ô◊ß◊ï◊ù ◊ë◊ñ◊ô◊õ◊®◊ï◊ü ◊ú◊ê ◊î◊©◊™◊†◊î ◊ë◊ñ◊û◊ü ◊©◊ë◊ô◊ü ◊î-load ◊ú-store. ◊î◊§◊¢◊ï◊ú◊î ◊û◊ó◊ñ◊ô◊®◊î ◊ê◊ô◊†◊ì◊ô◊ß◊¶◊ô◊î ◊ú◊î◊¶◊ú◊ó◊î ◊ê◊ï ◊ú◊õ◊ô◊©◊ú◊ï◊ü, ◊õ◊ö ◊©◊î◊ß◊ï◊ì ◊ô◊õ◊ï◊ú ◊ú◊†◊°◊ï◊™ ◊©◊ï◊ë ◊ë◊û◊ô◊ì◊™ ◊î◊¶◊ï◊®◊ö.
◊õ◊ú◊ï◊û◊® ◊î◊û◊™◊õ◊†◊™ ◊ë◊¢◊¶◊û◊ï ◊¶◊®◊ô◊ö ◊ú◊ë◊¶◊¢ ◊ë◊†◊§◊®◊ì ◊©◊™◊ô ◊§◊¢◊ï◊ú◊ï◊™: ◊ê◊ó◊™ ◊ß◊®◊ô◊ê◊™ ◊î◊¢◊®◊ö ◊ï◊î◊©◊†◊ô◊î ◊î◊ô◊ê ◊î◊õ◊™◊ô◊ë◊î ◊©◊ú ◊î◊¢◊®◊ö ◊î◊ó◊ì◊©.</p>
<h3 id="compare-and-swap-cas">
  Compare-and-Swap (CAS)
  <a class="heading-link" href="#compare-and-swap-cas">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>◊ñ◊ï ◊§◊¢◊ï◊ú◊î ◊©◊û◊ë◊¶◊¢◊™ ◊î◊©◊ï◊ï◊ê◊î ◊ë◊ô◊ü ◊î◊¢◊®◊ö ◊î◊†◊ï◊õ◊ó◊ô ◊ë◊ñ◊ô◊õ◊®◊ï◊ü ◊ú◊¢◊®◊ö ◊©◊†◊û◊°◊® ◊õ◊§◊®◊û◊ò◊®. ◊ê◊ù ◊î◊ù ◊ñ◊î◊ô◊ù, ◊î◊¢◊®◊ö ◊ë◊ñ◊ô◊õ◊®◊ï◊ü ◊û◊™◊¢◊ì◊õ◊ü ◊ú◊¢◊®◊ö ◊ó◊ì◊© ◊©◊†◊ô◊™◊ü ◊õ◊§◊®◊û◊ò◊® ◊†◊ï◊°◊£.</p>
<h3 id="◊§◊¢◊ï◊ú◊ï◊™-◊ê◊®◊ô◊™◊û◊ò◊ô◊ï◊™">
  ◊§◊¢◊ï◊ú◊ï◊™ ◊ê◊®◊ô◊™◊û◊ò◊ô◊ï◊™
  <a class="heading-link" href="#%d7%a4%d7%a2%d7%95%d7%9c%d7%95%d7%aa-%d7%90%d7%a8%d7%99%d7%aa%d7%9e%d7%98%d7%99%d7%95%d7%aa">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>◊§◊¢◊ï◊ú◊ï◊™ ◊ê◊®◊ô◊™◊û◊ò◊ô◊ï◊™ ◊ê◊ò◊ï◊û◊ô◊ï◊™ ◊ñ◊û◊ô◊†◊ï◊™ ◊ë◊¢◊ô◊ß◊® ◊ë◊ê◊®◊õ◊ô◊ò◊ß◊ò◊ï◊®◊ï◊™ x86 ◊ï-x86-64, ◊©◊ë◊î◊ü ◊î◊û◊¢◊ë◊ì◊ô◊ù ◊ô◊õ◊ï◊ú◊ô◊ù ◊ú◊ë◊¶◊¢ ◊§◊¢◊ï◊ú◊ï◊™ ◊ê◊®◊ô◊™◊û◊ò◊ô◊ï◊™ ◊ï◊ú◊ï◊í◊ô◊ï◊™ ◊ô◊©◊ô◊®◊ï◊™ ◊¢◊ú ◊û◊ô◊ß◊ï◊û◊ô ◊ñ◊ô◊õ◊®◊ï◊ü. ◊ú◊¢◊ï◊û◊™ ◊ñ◊ê◊™, ◊ë◊ê◊®◊õ◊ô◊ò◊ß◊ò◊ï◊®◊ï◊™ RISC ◊ú◊ê ◊ß◊ô◊ô◊û◊™ ◊™◊û◊ô◊õ◊î ◊ë◊§◊¢◊ï◊ú◊ï◊™ ◊û◊°◊ï◊í ◊ñ◊î, ◊ï◊ú◊õ◊ü ◊î◊ñ◊û◊ô◊†◊ï◊™ ◊©◊ú◊î◊ü ◊û◊ï◊í◊ë◊ú◊™.</p>
<p>◊õ◊ê◊©◊® ◊û◊©◊™◊û◊©◊ô◊ù ◊ë◊§◊¢◊ï◊ú◊ï◊™ ◊ê◊®◊ô◊™◊û◊ò◊ô◊ï◊™ ◊ê◊ò◊ï◊û◊ô◊ï◊™, ◊î◊û◊¢◊ë◊ì ◊©◊ï◊û◊® ◊¢◊ú ◊§◊¢◊ï◊ú◊ï◊™ ◊î-load ◊ï◊î-store ◊î◊ì◊®◊ï◊©◊ï◊™ ◊õ◊ê◊ó◊™. ◊õ◊ú◊ï◊û◊®, ◊î◊ï◊ê ◊û◊ï◊ï◊ì◊ê ◊©◊õ◊ú ◊ë◊ß◊©◊ï◊™ ◊î-cache ◊î◊û◊ï◊§◊¢◊ú◊ï◊™ ◊ë◊ï-◊ñ◊û◊†◊ô◊™ ◊ô◊ô◊ó◊°◊û◊ï ◊¢◊ì ◊©◊î◊§◊¢◊ï◊ú◊î ◊î◊ê◊ò◊ï◊û◊ô◊™ ◊™◊°◊™◊ô◊ô◊ù, ◊û◊î ◊©◊û◊ë◊ò◊ô◊ó ◊ê◊™ ◊™◊ß◊ô◊†◊ï◊™ ◊î◊†◊™◊ï◊†◊ô◊ù.</p>
<p>◊õ◊™◊ï◊¶◊ê◊î ◊û◊õ◊ö, ◊ô◊© ◊ó◊©◊ô◊ë◊ï◊™ ◊®◊ë◊î ◊ú◊™◊õ◊†◊ü ◊ê◊™ ◊®◊û◊™ ◊î◊î◊§◊©◊ò◊î ◊©◊ú ◊î◊û◊õ◊ï◊†◊î ◊õ◊ö ◊©◊†◊ô◊™◊ü ◊ô◊î◊ô◊î ◊ú◊î◊©◊™◊û◊© ◊ë◊§◊¢◊ï◊ú◊ï◊™ ◊ê◊®◊ô◊™◊û◊ò◊ô◊ï◊™ ◊ï◊ú◊ï◊í◊ô◊ï◊™ ◊ê◊ò◊ï◊û◊ô◊ï◊™ ◊õ◊©◊¶◊®◊ô◊ö. ◊¢◊ù ◊ñ◊ê◊™, ◊ê◊ô◊ü ◊ú◊î◊©◊™◊û◊© ◊ë-CAS ◊ë◊ê◊ï◊§◊ü ◊í◊ï◊®◊£ ◊õ◊û◊†◊í◊†◊ï◊ü ◊ê◊ó◊ô◊ì ◊ú◊õ◊ú ◊î◊û◊¶◊ë◊ô◊ù.</p>
<h3 id="heading">
  
  <a class="heading-link" href="#heading">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>◊§◊¢◊ï◊ú◊™ ◊ñ◊ô◊õ◊®◊ï◊ü ◊¢◊©◊ï◊ô◊î ◊©◊ú◊ê ◊ú◊î◊ô◊ï◊™ ◊ê◊ò◊ï◊û◊ô◊™, ◊ê◊§◊ô◊ú◊ï ◊õ◊ê◊©◊® ◊î◊ô◊ê ◊û◊ë◊ï◊¶◊¢◊™ ◊ë◊ê◊û◊¶◊¢◊ï◊™ ◊î◊ï◊®◊ê◊™ ◊û◊¢◊ë◊ì ◊ë◊ï◊ì◊ì◊™. ◊ú◊ì◊ï◊í◊û◊î, ◊ë◊ê◊®◊õ◊ô◊ò◊ß◊ò◊ï◊®◊™ ARMv7 ◊ß◊ô◊ô◊û◊™ ◊î◊ï◊®◊ê◊î ◊ë◊©◊ù <code>strd</code>, ◊©◊û◊ê◊ó◊°◊†◊™ ◊ê◊™ ◊î◊™◊ï◊õ◊ü ◊©◊ú ◊©◊†◊ô ◊®◊í◊ô◊°◊ò◊®◊ô◊ù ◊ë◊í◊ï◊ì◊ú 32 ◊ë◊ô◊ò◊ô◊ù ◊ú◊™◊ï◊ö ◊û◊ô◊ß◊ï◊ù ◊ñ◊ô◊õ◊®◊ï◊ü ◊ê◊ó◊ì ◊ë◊í◊ï◊ì◊ú 64 ◊ë◊ô◊ò◊ô◊ù. ◊¢◊ù ◊ñ◊ê◊™, ◊ë◊ô◊¶◊ï◊¢ ◊ñ◊î ◊ê◊ô◊†◊ï ◊ë◊î◊õ◊®◊ó ◊ê◊ò◊ï◊û◊ô, ◊õ◊ú◊ï◊û◊® ◊ô◊ô◊™◊õ◊ü ◊©◊õ◊™◊ô◊ë◊ï◊™ ◊ê◊ó◊®◊ï◊™ ◊ô◊ï◊õ◊ú◊ï ◊ú◊î◊™◊¢◊®◊ë ◊ë◊ê◊û◊¶◊¢ ◊î◊§◊¢◊ï◊ú◊î.</p>
<p>◊ë◊®◊ï◊ë ◊î◊û◊¢◊ë◊ì◊ô◊ù ◊î◊û◊ï◊ì◊®◊†◊ô◊ù ◊©◊ú x86 ◊ô◊© ◊î◊®◊ë◊î ◊§◊¢◊ï◊ú◊ï◊™ ◊ß◊®◊ô◊ê◊î ◊ï◊õ◊™◊ô◊ë◊î ◊©◊û◊™◊ë◊¶◊¢◊ï◊™ ◊ë◊ê◊ï◊§◊ü ◊®◊í◊ô◊ú ◊õ◊ê◊ò◊ï◊û◊ô◊ï◊™ ◊ë◊™◊†◊ê◊ô◊ù ◊û◊°◊ï◊ô◊ô◊û◊ô◊ù, ◊§◊¢◊ï◊ú◊ï◊™ ◊©◊ú loads ◊ï-stores ◊ë◊ï◊ì◊ì◊ï◊™ ◊©◊î◊ü cacheable, ◊ï◊û◊ô◊ï◊©◊®◊ï◊™ ◊ë◊ê◊ï◊§◊ü ◊ò◊ë◊¢◊ô ◊©◊ú ◊¢◊ì quadword ◊î◊ù ◊ê◊ò◊ï◊û◊ô◊ô◊ù.
◊ê◊ù ◊ê◊ô◊ü ◊ô◊ô◊©◊ï◊®, ◊ú◊ê ◊†◊ô◊™◊ü ◊ú◊î◊ë◊ò◊ô◊ó ◊©◊î◊§◊¢◊ï◊ú◊î ◊™◊™◊ë◊¶◊¢ ◊õ◊ê◊ò◊ï◊û◊ô◊™, ◊õ◊ú◊ï◊û◊® ◊ô◊ô◊™◊õ◊†◊ï ◊õ◊™◊ô◊ë◊ï◊™ ◊ê◊ó◊®◊ï◊™ ◊©◊ô◊™◊¢◊®◊ë◊ï ◊ë◊™◊î◊ú◊ô◊ö.
◊ô◊ï◊™◊® ◊û◊ì◊ï◊ô◊ô◊ß ◊ú◊î◊í◊ô◊ì ◊©◊§◊¢◊ú◊ï◊™ ◊©◊î◊ü single-copy atomicity ◊ô◊î◊ô◊ï ◊ê◊ò◊ï◊û◊ô◊ï◊™.</p>
<h2 id="cas">
  cas
  <a class="heading-link" href="#cas">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>◊î◊ì◊í◊û◊î ◊©◊ú ◊î◊®◊¢◊ô◊ï◊ü ◊©◊ú cas:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="ln">1</span><span class="cl"><span class="kt">long</span> <span class="nf">cas</span><span class="p">(</span><span class="kt">long</span> <span class="o">*</span><span class="n">mem</span><span class="p">,</span> <span class="kt">long</span> <span class="n">old</span><span class="p">,</span> <span class="kt">long</span> <span class="n">new</span><span class="p">);</span>
</span></span></code></pre></div><ol>
<li>◊û◊©◊ï◊ï◊î ◊ê◊™ <code>old</code> ◊ú◊¢◊®◊ö ◊õ◊®◊í◊¢ ◊ë-<code>mem</code>.</li>
<li>◊ê◊ù ◊î◊ù ◊©◊ï◊ï◊ô◊ù, <code>new</code> ◊†◊õ◊™◊ë ◊ú-<code>mem</code>.</li>
<li>◊ú◊ú◊ê ◊ß◊©◊®, ◊î◊¢◊®◊ö ◊î◊†◊ï◊õ◊ó◊ô ◊ë-<code>mem</code> ◊û◊ï◊ó◊ñ◊®.</li>
</ol>
<p>◊õ◊ì◊ï◊í◊û◊î ◊ú◊©◊ô◊û◊ï◊©, ◊õ◊ö ◊¢◊©◊ï◊ô ◊ú◊î◊ô◊®◊ê◊ï◊™ ◊¢◊ì◊õ◊ï◊ü ◊û◊ï◊†◊î ◊ê◊ò◊ï◊û◊ô:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="ln"> 1</span><span class="cl"><span class="kt">void</span> <span class="nf">example_atomic_inc</span><span class="p">(</span><span class="kt">long</span> <span class="o">*</span><span class="n">counter</span><span class="p">)</span>
</span></span><span class="line"><span class="ln"> 2</span><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="ln"> 3</span><span class="cl">    <span class="kt">long</span> <span class="n">old</span><span class="p">,</span> <span class="n">new</span><span class="p">,</span> <span class="n">ret</span><span class="p">;</span>
</span></span><span class="line"><span class="ln"> 4</span><span class="cl">
</span></span><span class="line"><span class="ln"> 5</span><span class="cl">    <span class="k">while</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln"> 6</span><span class="cl">        <span class="n">old</span> <span class="o">=</span> <span class="o">*</span><span class="n">counter</span><span class="p">;</span>
</span></span><span class="line"><span class="ln"> 7</span><span class="cl">        <span class="n">new</span> <span class="o">=</span> <span class="n">old</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="ln"> 8</span><span class="cl">
</span></span><span class="line"><span class="ln"> 9</span><span class="cl">        <span class="n">ret</span> <span class="o">=</span> <span class="nf">cas</span><span class="p">(</span><span class="n">counter</span><span class="p">,</span> <span class="n">old</span><span class="p">,</span> <span class="n">new</span><span class="p">);</span>
</span></span><span class="line"><span class="ln">10</span><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">ret</span> <span class="o">==</span> <span class="n">old</span><span class="p">)</span>
</span></span><span class="line"><span class="ln">11</span><span class="cl">            <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">12</span><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="ln">13</span><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h2 id="rmw">
  rmw
  <a class="heading-link" href="#rmw">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>◊†◊ô◊™◊ü ◊ú◊î◊í◊ì◊ô◊® ◊§◊¢◊ï◊ú◊î ◊ê◊ò◊ï◊û◊ô◊™ ◊õ◊§◊¢◊ï◊ú◊î ◊©◊ë◊î ◊û◊™◊ë◊¶◊¢◊™ ◊ß◊®◊ô◊ê◊î, ◊©◊ô◊†◊ï◊ô ◊ï◊õ◊™◊ô◊ë◊î ◊©◊ú ◊ê◊ï◊™◊ï ◊û◊ô◊ß◊ï◊ù ◊ë◊ñ◊ô◊õ◊®◊ï◊ü ◊ë◊¶◊ï◊®◊î ◊ê◊ò◊ï◊û◊ô◊™. ◊õ◊ú◊ï◊û◊®, ◊î◊§◊¢◊ï◊ú◊î ◊û◊™◊ë◊¶◊¢◊™ ◊ë◊©◊ú◊û◊ï◊™◊î ◊õ◊ö ◊©◊ú◊ê ◊†◊ô◊™◊ü ◊ú◊î◊§◊®◊ô◊ì ◊ë◊ô◊ü ◊î◊©◊ú◊ë◊ô◊ù, ◊ï◊ú◊ê ◊ô◊õ◊ï◊ú◊î ◊ú◊î◊™◊®◊ó◊© ◊õ◊™◊ô◊ë◊î ◊û◊û◊¢◊ë◊ì ◊ê◊ó◊® ◊ë◊ô◊ü ◊©◊ú◊ë ◊î◊ß◊®◊ô◊ê◊î ◊ú◊©◊ú◊ë ◊î◊õ◊™◊ô◊ë◊î. ◊ë◊û◊ô◊ú◊ô◊ù ◊ê◊ó◊®◊ï◊™, ◊§◊¢◊ï◊ú◊™ ◊î-RMW (◊ß◊ô◊¶◊ï◊® ◊©◊ú read modify write) ◊û◊™◊ë◊¶◊¢◊™ ◊õ◊ô◊ó◊ô◊ì◊î ◊ê◊ó◊™ ◊ë◊ú◊™◊ô ◊†◊ô◊™◊†◊™ ◊ú◊§◊ô◊®◊ï◊ß, ◊õ◊ö ◊©◊î◊ß◊®◊ô◊ê◊î ◊ï◊î◊õ◊™◊ô◊ë◊î ◊û◊™◊ë◊¶◊¢◊ï◊™ ◊ô◊ó◊ì ◊õ◊ê◊ô◊ú◊ï ◊î◊ü ◊§◊¢◊ï◊ú◊î ◊ë◊ï◊ì◊ì◊™, ◊ú◊ú◊ê ◊î◊™◊¢◊®◊ë◊ï◊™ ◊ó◊ô◊¶◊ï◊†◊ô◊™.</p>
<h3 id="◊§◊¢◊ï◊ú◊î-◊ê◊ò◊ï◊û◊ô◊™-◊ë◊¢◊ñ◊®◊™-◊§◊®◊ï◊ò◊ï◊ß◊ï◊ú-◊ß◊ï◊î◊®◊†◊ò◊ô◊ï◊™">
  ◊§◊¢◊ï◊ú◊î ◊ê◊ò◊ï◊û◊ô◊™ ◊ë◊¢◊ñ◊®◊™ ◊§◊®◊ï◊ò◊ï◊ß◊ï◊ú ◊ß◊ï◊î◊®◊†◊ò◊ô◊ï◊™
  <a class="heading-link" href="#%d7%a4%d7%a2%d7%95%d7%9c%d7%94-%d7%90%d7%98%d7%95%d7%9e%d7%99%d7%aa-%d7%91%d7%a2%d7%96%d7%a8%d7%aa-%d7%a4%d7%a8%d7%95%d7%98%d7%95%d7%a7%d7%95%d7%9c-%d7%a7%d7%95%d7%94%d7%a8%d7%a0%d7%98%d7%99%d7%95%d7%aa">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>◊ë◊ô◊¶◊ï◊¢ ◊§◊¢◊ï◊ú◊î ◊ê◊ò◊ï◊û◊ô◊™ ◊¢◊ú ◊¢◊ï◊™◊ß ◊©◊ú ◊†◊™◊ï◊ü ◊î◊©◊û◊ï◊® ◊ë-cache line ◊ô◊õ◊ï◊ú ◊ú◊î◊™◊ë◊¶◊¢ ◊ë◊ê◊ï◊§◊ü ◊û◊ß◊ï◊û◊ô ◊ë◊û◊ô◊ì◊î ◊ï◊î-cache line ◊û◊¶◊ï◊ô ◊ë◊û◊¶◊ë ◊ë◊¢◊ú◊ï◊™ ◊ë◊ú◊¢◊ì◊ô◊™, ◊õ◊ú◊ï◊û◊® ◊û◊¶◊ë Unique (◊ë◊§◊®◊ï◊ò◊ï◊ß◊ï◊ú AMBA CHI). ◊û◊¶◊ë ◊ñ◊î ◊û◊™◊ô◊ô◊ó◊° ◊ú◊û◊¶◊ë ◊©◊ë◊ï ◊î-cache line ◊†◊û◊¶◊ê ◊ë◊ë◊¢◊ú◊ï◊™ ◊ë◊ú◊¢◊ì◊ô◊™ (◊õ◊ú◊ï◊û◊® ◊ë◊û◊¶◊ë Unique, ◊î◊õ◊ï◊ï◊†◊î ◊î◊ô◊ê ◊ú◊ê ◊õ◊û◊ï Owned ◊©◊ú MOESI) ◊©◊ú ◊î-CPU ◊î◊û◊ë◊¶◊¢ ◊ê◊™ ◊î◊§◊¢◊ï◊ú◊î ◊î◊ê◊ò◊ï◊û◊ô◊™.</p>
<p>◊ê◊ù ◊î-cache line ◊†◊û◊¶◊ê ◊ë◊û◊¶◊ë Share, ◊ë◊¢◊ú◊ï◊™ ◊ë◊ú◊¢◊ì◊ô◊™ ◊¢◊ú ◊î-cache line ◊ô◊õ◊ï◊ú◊î ◊ú◊î◊™◊ë◊¶◊¢ ◊ë◊ê◊û◊¶◊¢◊ï◊™ ◊ê◊ó◊™ ◊û◊î◊ò◊®◊†◊ñ◊ß◊¶◊ô◊ï◊™ ◊î◊ë◊ê◊ï◊™ ◊ë-AMBA CHI:</p>
<ul>
<li>◊ò◊®◊†◊ñ◊ß◊¶◊ô◊ô◊™ ReadUnique: ◊§◊¢◊ï◊ú◊™ ◊ß◊®◊ô◊ê◊î ◊©◊û◊ë◊ô◊ê◊î ◊ú-state ◊©◊ú Unique ◊¢◊ú ◊î-cache line.</li>
<li>◊ò◊®◊†◊ñ◊ß◊¶◊ô◊ô◊™ CleanUnique: ◊§◊¢◊ï◊ú◊î ◊ú◊†◊ô◊ß◊ï◊ô ◊î-cache line ◊ï◊ú◊ß◊ë◊ú ◊ê◊ï◊™◊ï Unique.</li>
<li>◊ò◊®◊†◊ñ◊ß◊¶◊ô◊ô◊™ MakeReadUnique: ◊§◊¢◊ï◊ú◊î ◊©◊û◊©◊†◊î ◊ê◊™ ◊î◊û◊¶◊ë ◊©◊ú ◊î-cache line ◊ú◊û◊¶◊ë Unique.</li>
</ul>
<p>◊î◊©◊û◊ï◊™ ◊©◊ú ◊î◊ò◊®◊†◊ñ◊ß◊¶◊ô◊ï◊™ ◊î◊ù ◊ú◊§◊ô AMBA CHI ◊ê◊ë◊ú ◊î◊®◊¢◊ô◊ï◊ü ◊™◊ß◊£ ◊ú◊õ◊ú ◊§◊®◊ï◊ò◊ï◊ß◊ï◊ú ◊ß◊ï◊î◊®◊†◊ò◊ô◊ï◊™ ◊û◊ë◊ï◊°◊° invalidation.</p>
<h2 id="memory-model">
  memory model
  <a class="heading-link" href="#memory-model">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>◊ú◊°◊ú◊ô ◊ú◊û◊§◊ï◊®◊ò (Leslie Lamport) ◊ê◊û◊®, &ldquo;◊î◊í◊ô◊©◊î ◊ú◊û◊ô◊ß◊ï◊ù ◊ñ◊ô◊õ◊®◊ï◊ü ◊ô◊ó◊ô◊ì ◊ë◊®◊ô◊ë◊ï◊ô ◊û◊¢◊ë◊ì◊ô◊ù ◊û◊ß◊ï◊ë◊ú◊™ ◊ú◊î◊†◊ô◊ó ◊©◊î◊ô◊ê ◊ê◊ò◊ï◊û◊ô◊™. ◊ê◊ò◊ï◊û◊ô◊ï◊™ ◊õ◊ñ◊ï ◊î◊ô◊ê ◊§◊ô◊ß◊¶◊ô◊î; ◊í◊ô◊©◊î ◊ú◊ñ◊ô◊õ◊®◊ï◊ü ◊û◊ï◊®◊õ◊ë◊™ ◊û◊û◊°◊§◊® ◊§◊¢◊ï◊ú◊ï◊™ ◊ó◊ï◊û◊®◊î, ◊ï◊í◊ô◊©◊ï◊™ ◊©◊ï◊†◊ï◊™ ◊¢◊©◊ï◊ô◊ï◊™ ◊ú◊î◊™◊ë◊¶◊¢ ◊ë◊û◊ß◊ë◊ô◊ú&rdquo;. ◊î◊û◊©◊û◊¢◊ï◊™ ◊î◊ô◊ê ◊©◊õ◊™◊ï◊¶◊ê◊î ◊û◊õ◊ö, ◊î◊¢◊ï◊ë◊ì◊î ◊©◊î◊î◊ï◊®◊ê◊ï◊™ ◊ë◊™◊ï◊õ◊†◊ô◊™ ◊†◊õ◊™◊ë◊ï◊™ ◊ë◊°◊ì◊® ◊û◊°◊ï◊ô◊ù ◊ú◊ê ◊û◊ë◊ò◊ô◊ó◊î ◊©◊î◊û◊¢◊ë◊ì◊ô◊ù ◊î◊û◊ë◊¶◊¢◊ô◊ù ◊ê◊ï◊™◊ü ◊ê◊õ◊ü ◊ô◊ë◊¶◊¢◊ï ◊ê◊ï◊™◊ü ◊ë◊ì◊ô◊ï◊ß ◊ë◊ê◊ï◊™◊ï ◊°◊ì◊®.</p>
<p>◊ú◊û◊®◊ï◊™ ◊©◊ñ◊î ◊¢◊©◊ï◊ô ◊ú◊î◊ô◊®◊ê◊ï◊™ ◊ú◊ê ◊ê◊ô◊†◊ò◊ï◊ê◊ô◊ò◊ô◊ë◊ô, ◊ô◊© ◊ú◊õ◊ö ◊î◊ô◊í◊ô◊ï◊ü ◊õ◊ê◊©◊® ◊ú◊ï◊ß◊ó◊ô◊ù ◊ë◊ó◊©◊ë◊ï◊ü ◊©◊û◊¢◊ë◊ì◊ô◊ù ◊ô◊õ◊ï◊ú◊ô◊ù ◊ú◊†◊°◊ï◊™ ◊ú◊ô◊ô◊¢◊ú ◊ê◊™ ◊î◊ë◊ô◊¶◊ï◊¢◊ô◊ù ◊©◊ú◊î◊ù. ◊î◊ù ◊¢◊©◊ï◊ô◊ô◊ù ◊ú◊©◊†◊ï◊™ ◊ê◊™ ◊°◊ì◊® ◊î◊§◊¢◊ï◊ú◊ï◊™ ◊õ◊ì◊ô ◊ú◊î◊í◊ô◊¢ ◊ú◊ê◊ï◊™◊î ◊™◊ï◊¶◊ê◊î ◊ë◊ì◊®◊ö ◊û◊î◊ô◊®◊î ◊ê◊ï ◊ô◊¢◊ô◊ú◊î ◊ô◊ï◊™◊®. ◊¢◊ù ◊ñ◊ê◊™, ◊õ◊©◊ô◊© ◊û◊°◊§◊® ◊û◊¢◊ë◊ì◊ô◊ù ◊ê◊ï ◊ú◊ô◊ë◊ï◊™ ◊©◊§◊ï◊¢◊ú◊ï◊™ ◊ë◊ê◊ï◊§◊ü ◊¢◊¶◊û◊ê◊ô, ◊ß◊©◊î ◊ú◊¶◊§◊ï◊™ ◊ë◊û◊ì◊ï◊ô◊ß ◊û◊î ◊™◊î◊ô◊î ◊î◊™◊ï◊¶◊ê◊î ◊î◊°◊ï◊§◊ô◊™ ◊©◊ú ◊î◊ë◊ô◊¶◊ï◊¢ ◊î◊û◊ß◊ë◊ô◊ú◊ô. ◊í◊ù ◊ê◊ù ◊ú◊ê ◊î◊ô◊ô◊™◊î ◊î◊™◊¢◊®◊ë◊ï◊™ ◊©◊ú ◊°◊ô◊ì◊ï◊® ◊û◊ó◊ì◊© ◊û◊¶◊ì ◊î◊û◊¢◊ë◊ì, ◊®◊ô◊¶◊î ◊©◊ú ◊™◊ï◊õ◊†◊ô◊™ ◊¢◊ú ◊ú◊ô◊ë◊ï◊™ ◊û◊®◊ï◊ë◊ï◊™ ◊ú◊ú◊ê ◊°◊†◊õ◊®◊ï◊ü ◊†◊õ◊ï◊ü ◊¢◊©◊ï◊ô◊î ◊ú◊î◊ï◊ë◊ô◊ú ◊ú◊™◊ï◊¶◊ê◊ï◊™ ◊ë◊ú◊™◊ô ◊¶◊§◊ï◊ô◊ï◊™ ◊ê◊ï ◊ë◊ú◊™◊ô ◊†◊ô◊™◊†◊ï◊™ ◊ú◊ó◊ô◊ñ◊ï◊ô.</p>
<p>◊û◊õ◊ê◊ü ◊î◊ó◊©◊ô◊ë◊ï◊™ ◊©◊ú ◊°◊†◊õ◊®◊ï◊ü ◊†◊õ◊ï◊ü ◊ë◊ô◊ü ◊î◊û◊¢◊ë◊ì◊ô◊ù. ◊î◊°◊†◊õ◊®◊ï◊ü ◊û◊ê◊§◊©◊® ◊ú◊ß◊ë◊ï◊¢ ◊ê◊ô◊ú◊ï ◊§◊¢◊ï◊ú◊ï◊™ ◊ô◊õ◊ï◊ú◊ï◊™ ◊ú◊î◊™◊®◊ó◊© ◊ë◊û◊ß◊ë◊ô◊ú ◊ï◊ê◊ô◊ú◊ï ◊ó◊ô◊ô◊ë◊ï◊™ ◊ú◊î◊™◊ë◊¶◊¢ ◊ë◊°◊ì◊® ◊û◊°◊ï◊ô◊ù. ◊™◊î◊ú◊ô◊ö ◊ñ◊î ◊û◊ï◊ï◊ì◊ê ◊©◊î◊û◊¢◊ë◊ì◊ô◊ù ◊ô◊ï◊ì◊¢◊ô◊ù ◊û◊™◊ô ◊ô◊© ◊ú◊©◊û◊ï◊® ◊¢◊ú ◊î◊°◊ì◊® ◊î◊û◊ß◊ï◊®◊ô ◊©◊ú ◊î◊§◊¢◊ï◊ú◊ï◊™ ◊ï◊û◊™◊ô ◊†◊ô◊™◊ü ◊ú◊©◊†◊ï◊™ ◊ê◊ï◊™◊ï ◊õ◊ì◊ô ◊ú◊î◊ë◊ò◊ô◊ó ◊™◊ï◊¶◊ê◊ï◊™ ◊¢◊ß◊ë◊ô◊ï◊™ ◊ï◊û◊ì◊ï◊ô◊ß◊ï◊™.</p>
<p>◊û◊ï◊ì◊ú ◊î◊ñ◊ô◊õ◊®◊ï◊ü ◊û◊ô◊ô◊¶◊í ◊§◊¢◊ï◊ú◊î ◊ê◊ò◊ï◊û◊ô◊™ ◊©◊ú RMW ◊õ◊©◊†◊ô ◊ê◊ô◊®◊ï◊¢◊ô◊ù ◊¢◊ï◊ß◊ë◊ô◊ù: ◊®◊ê◊©◊ô◊™ ◊û◊™◊ë◊¶◊¢◊™ ◊ß◊®◊ô◊ê◊î R, ◊ï◊ú◊ê◊ó◊® ◊û◊õ◊ü ◊õ◊™◊ô◊ë◊î W. ◊û◊î ◊©◊û◊ë◊ò◊ô◊ó ◊ê◊™ ◊î◊ê◊ò◊ï◊û◊ô◊ï◊™ ◊©◊ú ◊î◊§◊¢◊ï◊ú◊î ◊î◊ï◊ê ◊î◊¢◊ï◊ë◊ì◊î ◊©◊ë◊ô◊ü ◊î◊ß◊®◊ô◊ê◊î ◊ú◊õ◊™◊ô◊ë◊î, ◊ê◊ô◊ü ◊ê◊§◊©◊®◊ï◊™ ◊ú◊õ◊™◊ô◊ë◊î ◊ê◊ó◊®◊™ ◊ú◊ê◊ï◊™◊ï ◊û◊ô◊ß◊ï◊ù ◊ë◊ñ◊ô◊õ◊®◊ï◊ü ◊¢◊ú ◊ô◊ì◊ô ◊ê◊£ ◊û◊¢◊ë◊ì ◊ê◊ó◊®. ◊ë◊û◊ô◊ú◊ô◊ù ◊ê◊ó◊®◊ï◊™, ◊û◊¢◊®◊õ◊™ ◊î◊ñ◊ô◊õ◊®◊ï◊ü ◊û◊ë◊ò◊ô◊ó◊î ◊©◊î◊õ◊™◊ô◊ë◊î ◊î◊ê◊ó◊®◊ï◊†◊î ◊©◊î◊™◊ë◊¶◊¢◊î ◊ú◊§◊†◊ô ◊©◊ú◊ë ◊î◊õ◊™◊ô◊ë◊î W ◊ë◊°◊ì◊® ◊î◊ß◊ï◊î◊®◊†◊ò◊ô◊ï◊™, ◊î◊ô◊ê ◊î◊õ◊™◊ô◊ë◊î ◊©◊û◊û◊†◊î ◊î◊ß◊®◊ô◊ê◊î R ◊ß◊ï◊®◊ê◊™ ◊ê◊™ ◊î◊¢◊®◊ö ◊©◊ú◊î, ◊õ◊ú◊ï◊û◊® ◊ß◊©◊® rf.</p>
<p>◊ê◊§◊©◊® ◊ú◊™◊ê◊® ◊ê◊™ ◊ñ◊î ◊¢◊ú ◊ô◊ì◊ô ◊î◊û◊ï◊ì◊ú ◊î◊ê◊ï◊§◊®◊ò◊ô◊ë◊ô ◊©◊ú ◊î◊ß◊®◊†◊ú: ◊î◊û◊ï◊ì◊ú ◊ì◊ï◊ê◊í ◊ú◊õ◊ö ◊©◊î◊õ◊™◊ô◊ë◊î W ◊™◊í◊ô◊¢ ◊ú◊†◊ß◊ï◊ì◊™ ◊î◊ß◊ï◊î◊®◊†◊ò◊ô◊ï◊™ ◊©◊ú◊î ◊û◊ô◊ì ◊ú◊ê◊ó◊® ◊î◊©◊ú◊û◊™ ◊î◊ß◊®◊ô◊ê◊î, ◊ï◊ú◊ê ◊ë◊û◊ï◊¢◊ì ◊û◊ê◊ï◊ó◊® ◊ô◊ï◊™◊® ◊ë◊ê◊ï◊§◊ü ◊©◊®◊ô◊®◊ï◊™◊ô, ◊õ◊§◊ô ◊©◊ß◊ï◊®◊î ◊ë◊õ◊™◊ô◊ë◊î ◊®◊í◊ô◊ú◊î. ◊™◊ï◊¶◊ê◊î ◊û◊õ◊ö ◊î◊ô◊ê ◊©◊õ◊™◊ô◊ë◊î ◊¢◊™◊ô◊ì◊ô◊™ ◊ú◊ê ◊™◊ï◊õ◊ú &ldquo;◊ú◊î◊™◊í◊†◊ë&rdquo; ◊ú◊§◊†◊ô ◊î◊õ◊™◊ô◊ë◊î W ◊ë◊°◊ì◊® ◊î◊ß◊ï◊î◊®◊†◊ò◊ô◊ï◊™. ◊©◊û◊ô◊®◊î ◊¢◊ú ◊®◊¶◊£ ◊ñ◊î ◊û◊ï◊†◊¢◊™ ◊î◊™◊í◊†◊ë◊ï◊™ ◊©◊ú ◊õ◊™◊ô◊ë◊ï◊™ ◊ê◊ó◊®◊ï◊™, ◊ï◊ë◊õ◊ö ◊û◊ë◊ò◊ô◊ó◊î ◊ê◊™ ◊ê◊ò◊ï◊û◊ô◊ï◊™ ◊î◊§◊¢◊ï◊ú◊î.</p>
<p>◊ú◊û◊®◊ï◊™ ◊©◊î◊û◊ï◊ì◊ú ◊û◊™◊ê◊® ◊ñ◊ê◊™ ◊ë◊û◊ï◊†◊ó◊ô◊ù ◊©◊ú ◊†◊ß◊ï◊ì◊™ ◊ß◊ï◊î◊®◊†◊ò◊ô◊ï◊™ ◊ô◊ó◊ô◊ì◊î, ◊î◊ì◊®◊ô◊©◊î ◊î◊ê◊û◊ô◊™◊ô◊™ ◊î◊ô◊ê ◊©◊ë◊õ◊ú ◊®◊í◊¢ ◊†◊™◊ï◊ü ◊™◊î◊ô◊î ◊†◊ß◊ï◊ì◊™ ◊ß◊ï◊î◊®◊†◊ò◊ô◊ï◊™ ◊ê◊ó◊™ ◊ú◊õ◊ú ◊û◊©◊™◊†◊î ◊°◊§◊¶◊ô◊§◊ô. ◊ì◊®◊ô◊©◊î ◊ñ◊ï ◊û◊™◊û◊û◊©◊™ ◊ë◊ê◊û◊¶◊¢◊ï◊™ cache line ◊©◊û◊ó◊ñ◊ô◊ß◊î ◊ê◊™ ◊î◊û◊©◊™◊†◊î, ◊ï◊©◊ô◊õ◊ï◊ú◊î ◊ú◊¢◊ë◊ï◊® ◊û◊û◊ß◊ï◊ù ◊ú◊û◊ß◊ï◊ù ◊ú◊§◊ô ◊î◊¶◊ï◊®◊ö. ◊ë◊†◊ï◊°◊£, ◊û◊©◊û◊¢◊ï◊™ ◊î◊ì◊ë◊® ◊î◊ô◊ê ◊©◊î◊û◊¢◊®◊õ◊™ ◊ô◊õ◊ï◊ú◊î ◊ú◊î◊©◊ô◊í scalability ◊¢◊ú ◊ô◊ì◊ô ◊õ◊ö ◊©◊ú◊õ◊ú cache line ◊™◊î◊ô◊î ◊†◊ß◊ï◊ì◊™ ◊ß◊ï◊î◊®◊†◊ò◊ô◊ï◊™ ◊û◊©◊ú◊î, ◊ì◊ë◊® ◊î◊û◊ê◊§◊©◊® ◊§◊¢◊ï◊ú◊î ◊™◊ß◊ô◊†◊î ◊í◊ù ◊ë◊û◊¢◊®◊õ◊ï◊™ ◊í◊ì◊ï◊ú◊ï◊™ ◊ï◊û◊ï◊®◊õ◊ë◊ï◊™. ◊ë◊û◊¢◊®◊õ◊ï◊™ ◊ó◊ï◊û◊®◊î ◊î◊û◊ô◊ï◊¢◊ì◊ï◊™ ◊ú◊î◊™◊®◊ó◊ë◊ï◊™ ◊õ◊ñ◊ï, ◊î◊™◊î◊ú◊ô◊ö ◊û◊°◊™◊û◊ö ◊¢◊ú ◊û◊†◊í◊†◊ï◊†◊ô store buffers ◊ú◊©◊û◊ô◊®◊î ◊¢◊ú ◊°◊ì◊® ◊î◊§◊¢◊ï◊ú◊ï◊™.</p>
<p>◊ë◊û◊¢◊®◊õ◊ï◊™ ◊ñ◊ô◊õ◊®◊ï◊ü, ◊ß◊ô◊ô◊û◊™ ◊ê◊§◊©◊®◊ï◊™ ◊ú◊°◊ì◊® ◊ê◊™ ◊î◊õ◊™◊ô◊ë◊ï◊™ ◊ú◊¢◊®◊õ◊ô◊ù ◊ë◊û◊©◊™◊†◊î ◊©◊û◊ò◊ï◊§◊ú ◊¢◊ú ◊ô◊ì◊ô ◊§◊¢◊ï◊ú◊î ◊ê◊ò◊ï◊û◊ô◊™ ◊û◊°◊ï◊í RMW. ◊ú◊ì◊ï◊í◊û◊î, ◊ê◊ù ◊û◊¢◊ë◊ì ◊û◊™◊ó◊ô◊ú ◊ë◊™◊î◊ú◊ô◊ö ◊©◊ú ◊§◊¢◊ï◊ú◊™ RMW ◊ï◊û◊ë◊¶◊¢ ◊ê◊™ ◊©◊ú◊ë ◊î◊ß◊®◊ô◊ê◊î, ◊ï◊ë◊ê◊ï◊™◊ï ◊ñ◊û◊ü ◊û◊¢◊ë◊ì ◊ê◊ó◊® ◊û◊†◊°◊î ◊ú◊õ◊™◊ï◊ë ◊ú◊ê◊ï◊™◊ï ◊û◊©◊™◊†◊î, ◊ê◊ö ◊î◊õ◊™◊ô◊ë◊î ◊©◊ú ◊î◊§◊¢◊ï◊ú◊î ◊î◊ê◊ò◊ï◊û◊ô◊™ ◊¢◊ì◊ô◊ô◊ü ◊ú◊ê ◊î◊ï◊©◊ú◊û◊î, ◊û◊¢◊®◊õ◊™ ◊î◊ñ◊ô◊õ◊®◊ï◊ü ◊ô◊õ◊ï◊ú◊î ◊ú◊©◊†◊ï◊™ ◊ê◊™ ◊î◊°◊ì◊® ◊î◊ß◊ï◊î◊®◊†◊ò◊ô ◊©◊ú ◊î◊§◊¢◊ï◊ú◊ï◊™. ◊ë◊û◊¶◊ë ◊õ◊ñ◊î, ◊î◊û◊¢◊®◊õ◊™ ◊™◊¢◊ì◊ô◊£ ◊ú◊î◊©◊ú◊ô◊ù ◊™◊ó◊ô◊ú◊î ◊ê◊™ ◊î◊õ◊™◊ô◊ë◊î ◊©◊ú ◊§◊¢◊ï◊ú◊™ ◊î-RMW ◊î◊ê◊ò◊ï◊û◊ô◊™ ◊ï◊®◊ß ◊ú◊ê◊ó◊® ◊û◊õ◊ü ◊™◊ë◊¶◊¢ ◊ê◊™ ◊î◊õ◊™◊ô◊ë◊î ◊©◊ú ◊î◊û◊¢◊ë◊ì ◊î◊ê◊ó◊®. ◊í◊ô◊©◊î ◊ñ◊ï ◊û◊ê◊§◊©◊®◊™ ◊©◊û◊ô◊®◊î ◊¢◊ú ◊ê◊ò◊ï◊û◊ô◊ï◊™ ◊î◊§◊¢◊ï◊ú◊î, ◊™◊ï◊ö ◊û◊†◊ô◊¢◊™ ◊î◊¶◊ï◊®◊ö ◊ë◊™◊ô◊ê◊ï◊ù ◊û◊°◊ï◊ë◊ö ◊ï◊ô◊ß◊® ◊ë◊ô◊ü ◊î◊û◊¢◊ë◊ì◊ô◊ù.</p>
<p>◊ú◊ó◊ô◊ú◊ï◊§◊ô◊ü, ◊ß◊ô◊ô◊û◊™ ◊í◊ù ◊ê◊§◊©◊®◊ï◊™ ◊©◊™◊™-◊û◊¢◊®◊õ◊™ ◊î◊ñ◊ô◊õ◊®◊ï◊ü ◊™◊í◊®◊ï◊ù ◊ú◊õ◊ô◊©◊ú◊ï◊ü ◊©◊ú ◊î◊õ◊™◊ô◊ë◊î ◊ë◊§◊¢◊ï◊ú◊î ◊î◊ê◊ò◊ï◊û◊ô◊™ ◊ë◊™◊†◊ê◊ô◊ù ◊õ◊ê◊ú◊ï. ◊ë◊ê◊®◊õ◊ô◊ò◊ß◊ò◊ï◊®◊ï◊™ ◊©◊û◊ô◊ô◊©◊û◊ï◊™ ◊í◊ô◊©◊î ◊ñ◊ï, ◊§◊¢◊ï◊ú◊ï◊™ RMW ◊û◊™◊ë◊¶◊¢◊ï◊™ ◊õ◊ú◊ï◊ú◊ê◊™ ◊™◊ï◊õ◊†◊î, ◊©◊ë◊î ◊î◊û◊¢◊ë◊ì ◊ó◊ï◊ñ◊® ◊ï◊û◊ë◊¶◊¢ ◊©◊ï◊ë ◊ê◊™ ◊î◊ß◊®◊ô◊ê◊î ◊î◊®◊ê◊©◊ï◊†◊ô◊™ ◊ê◊ù ◊î◊õ◊™◊ô◊ë◊î ◊†◊õ◊©◊ú◊™.</p>
<p>◊î◊ê◊ò◊ï◊û◊ô◊ï◊™ ◊©◊ú ◊§◊¢◊ï◊ú◊ï◊™ ◊ê◊ú◊ï ◊†◊ï◊ë◊¢◊™ ◊û◊î◊ì◊®◊ô◊©◊î ◊©◊õ◊™◊ô◊ë◊î ◊û◊û◊¢◊ë◊ì ◊ê◊ó◊® ◊ú◊ê ◊™◊ï◊õ◊ú ◊ú◊î◊™◊¢◊®◊ë ◊ë◊°◊ì◊® ◊î◊ß◊ï◊î◊®◊†◊ò◊ô◊ï◊™ ◊ë◊ô◊ü ◊î◊õ◊™◊ô◊ë◊î ◊©◊û◊û◊†◊î ◊§◊¢◊ï◊ú◊™ ◊î-RMW ◊ß◊®◊ê◊î ◊ú◊ë◊ô◊ü ◊î◊õ◊™◊ô◊ë◊î ◊©◊ú ◊î-RMW ◊¢◊¶◊û◊ï.</p>
<p>◊î◊û◊ï◊ì◊ú ◊î◊ñ◊ô◊õ◊®◊ï◊ü ◊©◊ú ◊ú◊ô◊†◊ï◊ß◊° (LKMM) ◊û◊í◊ì◊ô◊® ◊ß◊©◊® ◊ô◊©◊ô◊® ◊ë◊ô◊ü ◊ê◊ô◊®◊ï◊¢ ◊î◊ß◊®◊ô◊ê◊î ◊©◊ú ◊î◊ï◊®◊ê◊™ ◊î-RMW ◊ú◊ë◊ô◊ü ◊ê◊ô◊®◊ï◊¢ ◊î◊õ◊™◊ô◊ë◊î ◊©◊ú◊î, ◊™◊ï◊ö ◊î◊ë◊ò◊ó◊î ◊©◊ú◊ê ◊™◊™◊®◊ó◊© ◊õ◊™◊ô◊ë◊î ◊û◊™◊¢◊®◊ë◊™ ◊ë◊ê◊û◊¶◊¢. ◊î◊û◊ï◊ì◊ú ◊õ◊ï◊ú◊ú ◊ë◊ì◊ô◊ß◊î &ldquo;◊ê◊ò◊ï◊û◊ô◊™&rdquo; ◊©◊û◊ó◊ô◊ô◊ë◊™ ◊õ◊ô ◊î◊ß◊©◊® ◊î◊ñ◊î ◊ô◊î◊ô◊î ◊®◊ô◊ß.</p>
<h3 id="◊§◊¢◊ï◊ú◊ï◊™-◊ê◊ò◊ï◊û◊ô◊ï◊™-◊¢◊ù-sc">
  ◊§◊¢◊ï◊ú◊ï◊™ ◊ê◊ò◊ï◊û◊ô◊ï◊™ ◊¢◊ù SC
  <a class="heading-link" href="#%d7%a4%d7%a2%d7%95%d7%9c%d7%95%d7%aa-%d7%90%d7%98%d7%95%d7%9e%d7%99%d7%95%d7%aa-%d7%a2%d7%9d-sc">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>◊õ◊ì◊ô ◊©◊§◊¢◊ï◊ú◊™  RMW ◊™◊î◊ô◊î ◊ê◊ò◊ï◊û◊ô◊™ ◊™◊ó◊™ ◊û◊ï◊ì◊ú SC, ◊§◊¢◊ï◊ú◊ï◊™ ◊î◊ß◊®◊ô◊ê◊î ◊ï◊î◊õ◊™◊ô◊ë◊î ◊©◊û◊î◊ü ◊û◊ï◊®◊õ◊ë◊™ ◊î-RMW ◊ó◊ô◊ô◊ë◊ï◊™ ◊ú◊î◊ï◊§◊ô◊¢ ◊ë◊®◊¶◊£ ◊î◊†◊ì◊®◊© ◊ú◊§◊ô SC. ◊ë◊ê◊ï◊§◊ü ◊®◊¢◊ô◊ï◊†◊ô, ◊ô◊ô◊©◊ï◊ù ◊î◊ï◊®◊ê◊ï◊™ ◊ê◊ò◊ï◊û◊ô◊ï◊™ ◊ë◊û◊ô◊ß◊®◊ï-◊ê◊®◊õ◊ô◊ò◊ß◊ò◊ï◊®◊î ◊ê◊ô◊†◊ï ◊û◊°◊ï◊ë◊ö, ◊ê◊ö ◊¢◊ô◊¶◊ï◊ë◊ô◊ù ◊§◊©◊ï◊ò◊ô◊ù ◊¢◊ú◊ï◊ú◊ô◊ù ◊ú◊î◊ï◊ë◊ô◊ú ◊ú◊ë◊ô◊¶◊ï◊¢◊ô◊ù ◊ô◊®◊ï◊ì◊ô◊ù ◊ë◊î◊ï◊®◊ê◊ï◊™ ◊ê◊ò◊ï◊û◊ô◊ï◊™.</p>
<p>◊ô◊ô◊©◊ï◊û◊ô◊ù ◊û◊™◊ß◊ì◊û◊ô◊ù ◊©◊ú RMW ◊û◊©◊™◊û◊©◊ô◊ù ◊ë◊î◊ë◊†◊î ◊©-SC ◊ì◊ï◊®◊© ◊®◊ß ◊ê◊™ ◊î◊û◊®◊ê◊î ◊©◊ú ◊°◊ì◊® ◊õ◊ï◊ú◊ú ◊¢◊ë◊ï◊® ◊õ◊ú ◊î◊ë◊ß◊©◊ï◊™.</p>
<p>◊õ◊ì◊ô ◊ú◊ô◊ô◊©◊ù RMW ◊ê◊ò◊ï◊û◊ô, ◊î◊©◊ú◊ë ◊î◊®◊ê◊©◊ï◊ü ◊î◊ï◊ê ◊ú◊î◊©◊ô◊í ◊ê◊™ ◊î◊ë◊ú◊ï◊ß ◊ë◊û◊¶◊ë Modified ◊ë-cache ◊ê◊ù ◊î◊ë◊ú◊ï◊ß ◊ê◊ô◊†◊ï ◊†◊û◊¶◊ê ◊õ◊ë◊® ◊ë◊û◊¶◊ë ◊ñ◊î. ◊ú◊ê◊ó◊® ◊û◊õ◊ü, ◊î◊ú◊ô◊ë◊î ◊¶◊®◊ô◊õ◊î ◊ú◊ë◊¶◊¢ ◊ê◊™ ◊§◊¢◊ï◊ú◊ï◊™ ◊î◊ò◊¢◊ô◊†◊î ◊ï◊î◊ê◊ó◊°◊ï◊ü ◊©◊ú ◊î◊ë◊ú◊ï◊ß ◊ë-cache ◊©◊ú◊î ◊ú◊ú◊ê ◊¶◊ï◊®◊ö ◊ë◊î◊ï◊ì◊¢◊ï◊™ ◊ß◊ï◊î◊®◊†◊ò◊ô◊ï◊™ ◊ê◊ï ◊†◊¢◊ô◊ú◊™ bus, ◊õ◊ú ◊¢◊ï◊ì ◊î◊ô◊ê ◊û◊û◊™◊ô◊†◊î ◊ú◊õ◊ú ◊ë◊ß◊©◊™ ◊ß◊ï◊î◊®◊†◊ò◊ô◊ï◊™ ◊†◊õ◊†◊°◊™ ◊¢◊ë◊ï◊® ◊î◊ë◊ú◊ï◊ß ◊¢◊ì ◊ú◊ê◊ó◊® ◊§◊¢◊ï◊ú◊™ ◊î-store. ◊î◊û◊™◊†◊î ◊ñ◊ï ◊ê◊ô◊†◊î ◊û◊°◊õ◊†◊™ ◊ê◊™ ◊î◊ê◊ò◊ï◊û◊ô◊ï◊™ ◊û◊õ◊ô◊ï◊ï◊ü ◊©◊î-store ◊û◊ï◊ë◊ò◊ó◊™ ◊ú◊î◊©◊ú◊ô◊ù.</p>
<p>◊ô◊ô◊©◊ï◊ù ◊ê◊ï◊§◊ò◊ô◊û◊ú◊ô ◊†◊ï◊°◊£ ◊©◊ú RMW ◊¢◊©◊ï◊ô ◊ú◊ê◊§◊©◊® ◊ô◊ï◊™◊® ◊ñ◊û◊ü ◊ë◊ô◊ü ◊ë◊ô◊¶◊ï◊¢ ◊ó◊ú◊ß ◊î-load ◊ï◊ó◊ú◊ß ◊î-store ◊û◊ë◊ú◊ô ◊ú◊î◊§◊® ◊ê◊™ ◊î◊ê◊ò◊ï◊û◊ô◊ï◊™. ◊ú◊ì◊ï◊í◊û◊î, ◊ê◊ù ◊î◊ë◊ú◊ï◊ß ◊†◊û◊¶◊ê ◊ë◊û◊¶◊ë ◊ß◊®◊ô◊ê◊î ◊ë◊ú◊ë◊ì ◊ë-cache, ◊ó◊ú◊ß ◊î-load ◊©◊ú ◊î-RMW ◊ô◊õ◊ï◊ú ◊ú◊î◊™◊ë◊¶◊¢ ◊ë◊ê◊ï◊§◊ü ◊°◊§◊ß◊ï◊ú◊ò◊ô◊ë◊ô ◊û◊ô◊ô◊ì◊ô, ◊ë◊¢◊ï◊ì ◊©◊ë◊ß◊® ◊î-cache ◊û◊ï◊¶◊ô◊ê ◊ë◊ß◊©◊™ ◊ß◊ï◊î◊®◊†◊ò◊ô◊ï◊™ ◊ú◊©◊ì◊®◊ï◊í ◊û◊¶◊ë ◊î◊ë◊ú◊ï◊ß ◊ú◊ß◊®◊ô◊ê◊î-◊õ◊™◊ô◊ë◊î. ◊õ◊ê◊©◊® ◊î◊ë◊ú◊ï◊ß ◊û◊™◊ß◊ë◊ú ◊ë◊û◊¶◊ë ◊ß◊®◊ô◊ê◊î-◊õ◊™◊ô◊ë◊î, ◊ó◊ú◊ß ◊î-store ◊©◊ú ◊î-RMW ◊û◊™◊ë◊¶◊¢. ◊õ◊ú ◊¢◊ï◊ì ◊î◊ú◊ô◊ë◊î ◊©◊ï◊û◊®◊™ ◊¢◊ú ◊ê◊©◊ú◊ô◊î ◊©◊ú ◊ê◊ò◊ï◊û◊ô◊ï◊™, ◊ô◊ô◊©◊ï◊ù ◊ñ◊î ◊™◊ß◊ô◊ü. ◊õ◊ì◊ô ◊ú◊ï◊ï◊ì◊ê ◊©◊î◊ê◊©◊ú◊ô◊î ◊©◊ú ◊î◊ê◊ò◊ï◊û◊ô◊ï◊™ ◊†◊©◊û◊®◊™, ◊î◊ú◊ô◊ë◊î ◊¶◊®◊ô◊õ◊î ◊ú◊ë◊ì◊ï◊ß ◊ê◊ù ◊î◊ë◊ú◊ï◊ß ◊î◊ò◊¢◊ï◊ü ◊°◊ï◊ú◊ß ◊û◊î-cache ◊ë◊ô◊ü ◊ó◊ú◊ß ◊î-load ◊ú◊ó◊ú◊ß ◊î-store.</p>
<h3 id="◊§◊¢◊ï◊ú◊ï◊™-◊ê◊ò◊ï◊û◊ô◊ï◊™-◊¢◊ù-tso">
  ◊§◊¢◊ï◊ú◊ï◊™ ◊ê◊ò◊ï◊û◊ô◊ï◊™ ◊¢◊ù TSO
  <a class="heading-link" href="#%d7%a4%d7%a2%d7%95%d7%9c%d7%95%d7%aa-%d7%90%d7%98%d7%95%d7%9e%d7%99%d7%95%d7%aa-%d7%a2%d7%9d-tso">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>◊î◊ë◊¢◊ô◊ï◊™ ◊î◊ß◊©◊ï◊®◊ï◊™ ◊ú◊ô◊ô◊©◊ï◊ù ◊î◊ï◊®◊ê◊ï◊™ RMW ◊ê◊ò◊ï◊û◊ô◊ï◊™ ◊ë-SC ◊ì◊ï◊û◊ï◊™ ◊ú◊ê◊ú◊ï ◊î◊û◊ï◊§◊ô◊¢◊ï◊™ ◊ë◊û◊ï◊ì◊ú TSO. ◊î◊î◊ë◊ì◊ú ◊î◊¢◊ô◊ß◊®◊ô ◊ë◊ô◊ü ◊î◊û◊ï◊ì◊ú◊ô◊ù ◊î◊ï◊ê ◊©-TSO ◊û◊ê◊§◊©◊® ◊ú◊ß◊®◊ô◊ê◊ï◊™ ◊ú◊î◊ô◊ï◊™ ◊û◊°◊ï◊ì◊®◊ï◊™ ◊ú◊§◊†◊ô ◊õ◊™◊ô◊ë◊ï◊™ ◊ß◊ï◊ì◊û◊ï◊™, ◊ê◊ù ◊î◊õ◊™◊ô◊ë◊ï◊™ ◊î◊ú◊ú◊ï ◊î◊ï◊ñ◊†◊ï ◊ú-store-buffer.</p>
<p>◊ë◊î◊ß◊©◊® ◊ú-RMW, ◊î◊û◊©◊û◊¢◊ï◊™ ◊î◊ô◊ê ◊©◊ó◊ú◊ß ◊î◊õ◊™◊ô◊ë◊î (store) ◊¢◊©◊ï◊ô ◊ú◊î◊ô◊ï◊™ ◊û◊ê◊ï◊ó◊°◊ü ◊ë-store-buffer.</p>
<p>◊õ◊ì◊ô ◊ú◊î◊ë◊ô◊ü ◊õ◊ô◊¶◊ì ◊ú◊ô◊ô◊©◊ù RMW ◊ê◊ò◊ï◊û◊ô ◊ë-TSO, ◊†◊ô◊™◊ü ◊ú◊ì◊û◊ï◊™ ◊ê◊™ ◊î-RMW ◊õ◊ß◊®◊ô◊ê◊î ◊î◊û◊í◊ô◊¢◊î ◊û◊ô◊ì ◊ú◊ê◊ó◊®◊ô◊î ◊õ◊™◊ô◊ë◊î. ◊ú◊§◊ô ◊õ◊ú◊ú◊ô ◊î◊°◊ô◊ì◊ï◊® ◊©◊ú TSO, ◊ó◊ú◊ß ◊î-load ◊©◊ú ◊î-RMW ◊ú◊ê ◊ô◊õ◊ï◊ú ◊ú◊¢◊ë◊ï◊® (◊õ◊ú◊ï◊û◊®, ◊ú◊î◊ô◊ï◊™ ◊û◊°◊ï◊ì◊® ◊ú◊§◊†◊ô) loads ◊û◊ï◊ß◊ì◊û◊ï◊™ ◊ô◊ï◊™◊®. ◊ë◊™◊ó◊ô◊ú◊î, ◊ê◊ï◊ú◊ô ◊ô◊ô◊®◊ê◊î ◊©◊§◊¢◊ï◊ú◊™ ◊î-load ◊©◊ú ◊î-RMW ◊ô◊õ◊ï◊ú◊î ◊ú◊¢◊ë◊ï◊® stores ◊û◊ï◊ß◊ì◊û◊ï◊™ ◊ô◊ï◊™◊® ◊ë-store-buffer, ◊ê◊ö ◊ñ◊î ◊ú◊ê ◊ó◊ï◊ß◊ô. ◊ê◊ù ◊ó◊ú◊ß ◊î-load ◊©◊ú ◊î-RMW ◊î◊ô◊î ◊¢◊ï◊ë◊® store ◊û◊ï◊ß◊ì◊û◊™ ◊ô◊ï◊™◊®, ◊ê◊ñ ◊î◊ó◊ú◊ß ◊î-store ◊©◊ú ◊î-RMW ◊î◊ô◊î ◊¶◊®◊ô◊ö ◊ú◊¢◊ë◊ï◊® ◊í◊ù ◊ê◊™ ◊ê◊ï◊™◊î store ◊û◊ï◊ß◊ì◊û◊™ ◊ô◊ï◊™◊®, ◊õ◊ô◊ï◊ï◊ü ◊©◊î-RMW ◊î◊ï◊ê ◊§◊¢◊ï◊ú◊î ◊ê◊ò◊ï◊û◊ô◊™ ◊©◊û◊ß◊©◊®◊™ ◊ë◊ô◊ü ◊©◊†◊ô ◊î◊ó◊ú◊ß◊ô◊ù. ◊û◊õ◊ô◊ï◊ï◊ü ◊©-TSO ◊ê◊ï◊°◊®◊™ ◊¢◊ú stores ◊ú◊¢◊ë◊ï◊® ◊ñ◊ï ◊¢◊ú ◊§◊†◊ô ◊ñ◊ï, ◊ó◊ú◊ß ◊î-load ◊©◊ú ◊î-RMW ◊ê◊ô◊†◊ï ◊ô◊õ◊ï◊ú ◊ú◊¢◊ë◊ï◊® ◊í◊ù ◊õ◊™◊ô◊ë◊î ◊û◊ï◊ß◊ì◊û◊™ ◊ô◊ï◊™◊®.</p>
<p>◊ë◊†◊ï◊°◊£, ◊õ◊ì◊ô ◊ú◊î◊ë◊ò◊ô◊ó ◊©◊ó◊ú◊ß ◊î-store ◊ô◊ï◊õ◊ú ◊ú◊î◊™◊ë◊¶◊¢ ◊û◊ô◊ì ◊ú◊ê◊ó◊® ◊ó◊ú◊ß ◊î-load, ◊ô◊© ◊¶◊ï◊®◊ö ◊ë◊î◊©◊í◊™ ◊î◊®◊©◊ê◊ï◊™ ◊ß◊ï◊î◊®◊†◊ò◊ô◊ï◊™ ◊ú◊ß◊®◊ô◊ê◊î-◊õ◊™◊ô◊ë◊î ◊¢◊ë◊ï◊® ◊ó◊ú◊ß ◊î-load. ◊ñ◊ê◊™ ◊ë◊†◊ô◊í◊ï◊ì ◊ú◊î◊®◊©◊ê◊ï◊™ ◊ß◊®◊ô◊ê◊î ◊ë◊ú◊ë◊ì ◊©◊û◊°◊§◊ô◊ß◊ï◊™ ◊¢◊ë◊ï◊® loads ◊®◊í◊ô◊ú◊ï◊™. ◊ë◊†◊ï◊°◊£, ◊õ◊ì◊ô ◊ú◊©◊û◊ï◊® ◊¢◊ú ◊ê◊ò◊ï◊û◊ô◊ï◊™ ◊î-RMW, ◊ë◊ß◊® ◊î-cache ◊¢◊©◊ï◊ô ◊ú◊î◊ô◊ì◊®◊© ◊ú◊©◊û◊ï◊® ◊¢◊ú ◊î◊®◊©◊ê◊™ ◊ß◊ï◊î◊®◊†◊ò◊ô◊ï◊™ ◊ú◊ë◊ú◊ï◊ß ◊ë◊ô◊ü ◊§◊¢◊ï◊ú◊™ ◊î-load ◊ú-store.</p>
<p>◊ô◊ô◊©◊ï◊ù ◊ê◊ï◊§◊ò◊ô◊û◊ú◊ô ◊©◊ú RMW ◊ê◊§◊©◊®◊ô ◊ë◊û◊ß◊®◊ô◊ù ◊û◊°◊ï◊ô◊û◊ô◊ù. ◊ú◊ì◊ï◊í◊û◊î, ◊ê◊ô◊ü ◊¶◊ï◊®◊ö ◊ú◊†◊ß◊ñ ◊ê◊™ ◊î-store buffer ◊õ◊ú ◊¢◊ï◊ì ◊û◊™◊ß◊ô◊ô◊û◊ï◊™ ◊î◊™◊†◊ê◊ô◊ù ◊î◊ë◊ê◊ô◊ù:</p>
<ol>
<li>◊õ◊ú ◊¢◊®◊ö ◊î◊†◊û◊¶◊ê ◊ë-store buffer ◊ó◊ô◊ô◊ë ◊ú◊î◊ô◊ï◊™ ◊û◊ú◊ï◊ï◊î ◊ë◊î◊®◊©◊ê◊™ ◊ß◊®◊ô◊ê◊î-◊õ◊™◊ô◊ë◊î ◊ë-cache, ◊ï◊î◊®◊©◊ê◊î ◊ñ◊ï ◊ó◊ô◊ô◊ë◊™ ◊ú◊î◊ô◊©◊û◊® ◊ë-cache ◊¢◊ì ◊©◊°◊ô◊ï◊ù ◊î-RMW ◊û◊™◊ë◊¶◊¢.</li>
<li>◊î◊ú◊ô◊ë◊î ◊¶◊®◊ô◊õ◊î ◊ú◊ë◊¶◊¢ ◊ë◊ì◊ô◊ß◊ï◊™ ◊°◊§◊ß◊ï◊ú◊¶◊ô◊ï◊™ ◊©◊ú load. ◊ë◊ê◊ï◊§◊ü ◊ú◊ï◊í◊ô, ◊õ◊ú ◊î-stores ◊ï◊î-loads ◊î◊ß◊ï◊ì◊û◊ô◊ù ◊¶◊®◊ô◊õ◊ô◊ù ◊ú◊î◊™◊ó◊ô◊ô◊ë ◊õ◊ô◊ó◊ô◊ì◊î ◊ê◊ó◊™ ◊û◊ô◊ì ◊ú◊§◊†◊ô ◊î-RMW.</li>
</ol>
<h3 id="◊î◊ï◊®◊ê◊ï◊™-◊ê◊ò◊ï◊û◊ô◊ï◊™-◊¢◊ù-xc">
  ◊î◊ï◊®◊ê◊ï◊™ ◊ê◊ò◊ï◊û◊ô◊ï◊™ ◊¢◊ù XC
  <a class="heading-link" href="#%d7%94%d7%95%d7%a8%d7%90%d7%95%d7%aa-%d7%90%d7%98%d7%95%d7%9e%d7%99%d7%95%d7%aa-%d7%a2%d7%9d-xc">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>◊ô◊©◊†◊ü ◊û◊°◊§◊® ◊©◊ô◊ò◊ï◊™ ◊ú◊ô◊ô◊©◊ï◊ù ◊î◊ï◊®◊ê◊ï◊™ RMW ◊ê◊ò◊ï◊û◊ô◊ï◊™ ◊ë◊û◊¢◊®◊õ◊ï◊™ ◊î◊™◊ï◊û◊õ◊ï◊™ ◊ë-XC, ◊ï◊î◊ô◊ô◊©◊ï◊ù ◊î◊û◊ì◊ï◊ô◊ß ◊™◊ú◊ï◊ô ◊õ◊ô◊¶◊ì ◊î◊û◊¢◊®◊õ◊™ ◊û◊ô◊ô◊©◊û◊™ ◊ê◊™ XC. ◊ë◊°◊¢◊ô◊£ ◊ñ◊î, ◊†◊†◊ô◊ó ◊©◊û◊¢◊®◊õ◊™ ◊î-XC ◊õ◊ï◊ú◊ú◊™ ◊ú◊ô◊ë◊ï◊™ ◊î◊û◊™◊ï◊ñ◊û◊†◊ï◊™ ◊ë◊ê◊ï◊§◊ü ◊ì◊ô◊†◊û◊ô, ◊©◊õ◊ú ◊ê◊ó◊™ ◊û◊î◊ü ◊û◊ó◊ï◊ë◊®◊™ ◊ú◊û◊¢◊®◊õ◊™ ◊î◊ñ◊ô◊õ◊®◊ï◊ü ◊ë◊ê◊û◊¶◊¢◊ï◊™ store buffer ◊©◊ê◊ô◊†◊ï FIFO ◊û◊™◊ú◊õ◊ì.</p>
<p>◊ú◊§◊†◊ô ◊ë◊ô◊¶◊ï◊¢ ◊î◊ï◊®◊ê◊î ◊ê◊ò◊ï◊û◊ô◊™, ◊î◊ú◊ô◊ë◊î ◊¶◊®◊ô◊õ◊î ◊ú◊†◊ß◊ñ ◊ê◊™ ◊î-store buffer ◊©◊ú◊î, ◊ú◊ß◊ë◊ú ◊ê◊™ ◊î◊ë◊ú◊ï◊ß ◊¢◊ù ◊î◊®◊©◊ê◊ï◊™ ◊ß◊ï◊î◊®◊†◊ò◊ô◊ï◊™ ◊ú◊ß◊®◊ô◊ê◊î-◊õ◊™◊ô◊ë◊î, ◊ï◊ú◊ê◊ó◊® ◊û◊õ◊ü ◊ú◊ë◊¶◊¢ ◊ê◊™ ◊ó◊ú◊ß ◊î-load ◊ï◊ó◊ú◊ß ◊î-store ◊©◊ú ◊î◊î◊ï◊®◊ê◊î ◊î◊ê◊ò◊ï◊û◊ô◊™. ◊õ◊ê◊©◊® ◊î◊ë◊ú◊ï◊ß ◊†◊û◊¶◊ê ◊ë◊û◊¶◊ë ◊ß◊®◊ô◊ê◊î-◊õ◊™◊ô◊ë◊î, ◊ó◊ú◊ß ◊î-store ◊û◊™◊ë◊¶◊¢ ◊ô◊©◊ô◊®◊ï◊™ ◊ú-cache, ◊™◊ï◊ö ◊¢◊ß◊ô◊§◊™ ◊î-store buffer. ◊ê◊ù ◊ô◊© ◊ó◊ú◊ï◊ü ◊ñ◊û◊ü ◊ë◊ô◊ü ◊ë◊ô◊¶◊ï◊¢ ◊ó◊ú◊ß ◊î-load ◊ú◊ó◊ú◊ß ◊î-store, ◊ê◊°◊ï◊® ◊ú◊ë◊ß◊® ◊î-cache ◊ú◊§◊†◊ï◊™ ◊ê◊™ ◊î◊ë◊ú◊ï◊ß; ◊ê◊ù ◊™◊í◊ô◊¢ ◊ë◊ß◊©◊™ ◊ß◊ï◊î◊®◊†◊ò◊ô◊ï◊™ ◊†◊õ◊†◊°◊™, ◊ô◊© ◊ú◊ì◊ó◊ï◊™ ◊ê◊ï◊™◊î ◊¢◊ì ◊©◊°◊ô◊ï◊ù ◊ó◊ú◊ß ◊î-store ◊©◊ú ◊î-RMW.</p>
<p>◊©◊ô◊ò◊î ◊ñ◊ï, ◊î◊û◊†◊ï◊í◊ì◊™ ◊ú◊§◊™◊®◊ï◊ü ◊î-TSO, ◊î◊ô◊ê ◊§◊©◊ï◊ò◊î ◊ê◊ö ◊©◊û◊®◊†◊ô◊™ ◊ô◊ï◊™◊® ◊ï◊¢◊©◊ï◊ô◊î ◊ú◊§◊í◊ï◊¢ ◊ë◊ë◊ô◊¶◊ï◊¢◊ô◊ù. ◊ô◊© ◊ú◊¶◊ô◊ô◊ü ◊õ◊ô ◊†◊ô◊ß◊ï◊ô ◊î-store buffer ◊ê◊ô◊†◊ï ◊†◊ì◊®◊© ◊ë◊û◊¢◊®◊õ◊™ ◊î-XC, ◊û◊õ◊ô◊ï◊ï◊ü ◊©◊î◊ô◊ê ◊û◊ê◊§◊©◊®◊™ ◊í◊ù ◊ú◊ó◊ú◊ß ◊©◊ú ◊î-load ◊ï◊í◊ù ◊ú◊ó◊ú◊ß ◊©◊ú ◊î-store ◊©◊ú ◊î-RMW ◊ú◊¢◊ë◊ï◊® stores ◊û◊ï◊ß◊ì◊û◊ï◊™ ◊ô◊ï◊™◊®. ◊ú◊õ◊ü, ◊†◊ô◊™◊ü ◊ú◊î◊©◊ô◊í ◊ê◊™ ◊î◊î◊®◊©◊ê◊ï◊™ ◊î◊ß◊ï◊î◊®◊†◊ò◊ô◊ï◊™ ◊ú◊ß◊®◊ô◊ê◊î-◊õ◊™◊ô◊ë◊î ◊ú◊ë◊ú◊ï◊ß ◊ï◊ú◊ë◊¶◊¢ ◊ê◊™ ◊ó◊ú◊ß ◊î-load ◊ï◊ó◊ú◊ß ◊î-store ◊û◊ë◊ú◊ô ◊ú◊ï◊ï◊™◊® ◊¢◊ú ◊î◊ë◊ú◊ï◊ß ◊ë◊ô◊ü ◊©◊™◊ô ◊î◊§◊¢◊ï◊ú◊ï◊™.</p>
<p>◊ô◊©◊†◊ù ◊ô◊ô◊©◊ï◊û◊ô◊ù ◊†◊ï◊°◊§◊ô◊ù ◊©◊ú RMW ◊ê◊ò◊ï◊û◊ô◊ô◊ù, ◊ê◊ö ◊ú◊ê ◊†◊ì◊ï◊ü ◊ë◊î◊ù ◊õ◊ê◊ü.</p>
<h3 id="◊û◊ï◊ì◊ú-tso-◊ú◊¢◊ï◊û◊™-xc">
  ◊û◊ï◊ì◊ú TSO ◊ú◊¢◊ï◊û◊™ XC
  <a class="heading-link" href="#%d7%9e%d7%95%d7%93%d7%9c-tso-%d7%9c%d7%a2%d7%95%d7%9e%d7%aa-xc">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>◊ë◊û◊ï◊ì◊ú TSO, ◊î◊ï◊®◊ê◊™ RMW ◊î◊ê◊ò◊ï◊û◊ô◊™ ◊û◊©◊û◊©◊™ ◊ú◊¶◊ï◊®◊ö ◊®◊õ◊ô◊©◊™ ◊û◊†◊¢◊ï◊ú, ◊ë◊¢◊ï◊ì ◊©-store ◊û◊©◊û◊©◊™ ◊ú◊©◊ó◊®◊ï◊® ◊î◊û◊†◊¢◊ï◊ú. ◊¢◊ù ◊ñ◊ê◊™, ◊ë◊û◊ï◊ì◊ú XC ◊î◊û◊¶◊ë ◊û◊ï◊®◊õ◊ë ◊ô◊ï◊™◊®. ◊ë◊û◊ï◊ì◊ú XC, ◊ê◊ô◊ü ◊û◊í◊ë◊ú◊î ◊ê◊ï◊ò◊ï◊û◊ò◊ô◊™ ◊¢◊ú ◊°◊ì◊® ◊î◊§◊¢◊ï◊ú◊ï◊™ ◊©◊ú ◊î-RMW ◊ë◊ô◊ó◊° ◊ú◊§◊¢◊ï◊ú◊ï◊™ ◊©◊†◊¢◊©◊ï◊™ ◊ë◊™◊ï◊ö ◊î◊ß◊ò◊¢ ◊î◊ß◊®◊ô◊ò◊ô. ◊õ◊ú◊ï◊û◊®, ◊î-RMW ◊ô◊õ◊ï◊ú ◊ú◊¢◊ë◊ï◊® ◊û◊ó◊ì◊© ◊¢◊ú ◊§◊¢◊ï◊ú◊ï◊™ ◊ê◊ó◊®◊ï◊™ ◊ë◊ß◊ò◊¢ ◊î◊ß◊®◊ô◊ò◊ô ◊ú◊ú◊ê ◊î◊í◊ë◊ú◊î. ◊õ◊ì◊ô ◊ú◊û◊†◊ï◊¢ ◊ë◊¢◊ô◊î ◊ñ◊ï, ◊®◊õ◊ô◊©◊™ ◊û◊†◊¢◊ï◊ú ◊ë◊ê◊û◊¶◊¢◊ï◊™ RMW ◊ó◊ô◊ô◊ë◊™ ◊ú◊î◊ô◊ï◊™ ◊û◊ú◊ï◊ï◊î ◊ë◊û◊ó◊°◊ï◊ù ◊õ◊ì◊ô ◊ú◊î◊ë◊ò◊ô◊ó ◊©◊î◊§◊¢◊ï◊ú◊î ◊™◊™◊ë◊¶◊¢ ◊ë◊°◊ì◊® ◊î◊†◊õ◊ï◊ü. ◊ë◊ê◊ï◊§◊ü ◊ì◊ï◊û◊î, ◊©◊ó◊®◊ï◊® ◊î◊û◊†◊¢◊ï◊ú ◊ë◊û◊ï◊ì◊ú XC ◊ê◊ô◊†◊ï ◊û◊ï◊í◊ë◊ú ◊û◊®◊ê◊© ◊ï◊ú◊ê ◊û◊ë◊ò◊ô◊ó ◊©◊ú◊ê ◊ô◊ß◊®◊î ◊°◊ì◊® ◊û◊ó◊ì◊© ◊©◊ú ◊§◊¢◊ï◊ú◊ï◊™ ◊©◊ß◊ì◊û◊ï ◊ú◊ï ◊ë◊ß◊ò◊¢ ◊î◊ß◊®◊ô◊ò◊ô. ◊õ◊ì◊ô ◊ú◊û◊†◊ï◊¢ ◊ë◊¢◊ô◊î ◊ñ◊ï, ◊ô◊© ◊ú◊î◊ï◊°◊ô◊£ ◊û◊ó◊°◊ï◊ù ◊ú◊§◊†◊ô ◊©◊ó◊®◊ï◊® ◊î◊û◊†◊¢◊ï◊ú, ◊õ◊ì◊ô ◊ú◊î◊ë◊ò◊ô◊ó ◊©◊î◊©◊ó◊®◊ï◊® ◊ô◊™◊ë◊¶◊¢ ◊ë◊°◊ì◊® ◊î◊†◊õ◊ï◊ü.</p>
<h3 id="lkmm">
  LKMM
  <a class="heading-link" href="#lkmm">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>◊î-LKMM ◊ì◊ï◊®◊© ◊©◊õ◊ú ◊î◊¢◊ì◊õ◊ï◊†◊ô◊ù ◊î◊ê◊ò◊ï◊û◊ô◊ô◊ù ◊ô◊¢◊û◊ì◊ï ◊ë◊õ◊ú◊ú ◊î◊ë◊ê: ◊õ◊ê◊©◊® <code>R</code> ◊ï-<code>W</code> ◊î◊ù ◊î◊ê◊ô◊®◊ï◊¢◊ô◊ù ◊©◊ú ◊ß◊®◊ô◊ê◊î ◊ï◊õ◊™◊ô◊ë◊î ◊©◊û◊®◊õ◊ô◊ë◊ô◊ù ◊§◊¢◊ï◊ú◊î ◊ê◊ò◊ï◊û◊ô◊™ ◊©◊ú RMW, ◊ï-<code>W</code> ◊î◊ï◊ê ◊î◊ê◊ô◊®◊ï◊¢ ◊©◊ú ◊î◊õ◊™◊ô◊ë◊î ◊©◊û◊û◊†◊ï <code>R</code> ◊ß◊ï◊®◊ê, ◊ê◊°◊ï◊® ◊©◊ô◊î◊ô◊ï ◊õ◊ú ◊§◊¢◊ï◊ú◊ï◊™ ◊ê◊ó◊°◊ï◊ü ◊©◊û◊™◊®◊ó◊©◊ï◊™ ◊ë◊ô◊ü <code>W</code> ◊ú-<code>R</code> ◊ë◊°◊ì◊® ◊î◊ß◊ï◊î◊®◊†◊ò◊ô◊ï◊™.</p>
<p>◊ñ◊î ◊†◊õ◊™◊ë ◊ë◊ß◊ï◊ë◊• <code>tools/memory-model/linux-kernel.cat</code> (<a href="https://elixir.bootlin.com/linux/v6.4.11/source/tools/memory-model/linux-kernel.cat#72"  class="external-link" target="_blank" rel="noopener">◊ß◊ô◊©◊ï◊®</a>) ◊©◊ú ◊î◊ß◊®◊†◊ú ◊ë◊¶◊ï◊®◊î ◊î◊ë◊ê◊î:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ocaml" data-lang="ocaml"><span class="line"><span class="ln">1</span><span class="cl"><span class="c">(* Atomic Read-Modify-Write *)</span>
</span></span><span class="line"><span class="ln">2</span><span class="cl"><span class="n">empty</span> <span class="n">rmw</span> <span class="o">&amp;</span> <span class="o">(</span><span class="n">fre</span> <span class="o">;</span> <span class="n">coe</span><span class="o">)</span> <span class="k">as</span> <span class="n">atomic</span>
</span></span></code></pre></div><p>◊î◊ë◊ô◊ò◊ï◊ô <code>fre ; coe</code> ◊û◊ó◊ë◊® ◊õ◊ú ◊ß◊®◊ô◊ê◊î ◊©◊ú ◊û◊©◊™◊†◊î ◊†◊™◊ï◊ü ◊ú◊õ◊™◊ô◊ë◊î ◊û◊ê◊ï◊ó◊®◊™ ◊ô◊ï◊™◊® ◊©◊ú ◊ê◊ï◊™◊ï ◊û◊©◊™◊†◊î, ◊õ◊ê◊©◊® ◊ú◊§◊ó◊ï◊™ ◊õ◊™◊ô◊ë◊î ◊ê◊ó◊™ ◊û◊™◊¢◊®◊ë◊™ ◊ë◊ï◊¶◊¢◊î ◊¢◊ú ◊ô◊ì◊ô thread ◊ê◊ó◊®.</p>
<p>◊ë◊í◊ú◊ú ◊©◊§◊¢◊ï◊ú◊ï◊™ ◊ê◊ò◊ï◊û◊ô◊ï◊™ ◊ë◊§◊ï◊¢◊ú ◊û◊™◊†◊î◊í◊ï◊™ ◊õ◊û◊ï ◊§◊¢◊ï◊ú◊™ ◊ß◊®◊ô◊ê◊î ◊ï◊ú◊ê◊ó◊® ◊û◊õ◊ü ◊§◊¢◊ï◊ú◊™ ◊õ◊™◊ô◊ë◊î ◊©◊ê◊°◊ï◊® ◊©◊ë◊ô◊†◊ô◊î◊ù ◊ô◊î◊ô◊î ◊õ◊™◊ô◊ë◊î ◊ê◊ñ ◊î◊õ◊™◊ô◊ë ◊î◊§◊ï◊®◊û◊ú◊ô ◊î◊ï◊ê:</p>
$$
\begin{aligned}
R_{a} - \textrm{atomic read} \\
W_{a} - \textrm{atomic write} \\
\\
R_{a} \to_{\textrm{fre}} W_{1}  \ ; \ W_{1} \to_{\textrm{coe}} W_{a} \\
\Downarrow \\
R_{a} \to W_{a} \\
\\
\textrm{rmw} \ \cap \ R_{a} \to W_{a}
\end{aligned}
$$<p>◊ï◊î◊ó◊ô◊™◊ï◊ö ◊ë◊ô◊ü ◊î-rmw ◊ú◊§◊¢◊ï◊ú◊™ ◊î◊ß◊®◊ô◊ê◊î ◊ï◊î◊õ◊™◊ô◊ë◊î ◊¶◊®◊ô◊ö ◊ú◊î◊ô◊ï◊™ ◊®◊ô◊ß ◊ë◊í◊ú◊ú ◊©◊î◊ï◊ê ◊ß◊ô◊ô◊ù ◊®◊ß ◊õ◊©◊ô◊© ◊§◊¢◊ï◊ú◊î -$W_{1}$ ◊©◊û◊™◊®◊ó◊©◊™ ◊ë◊ô◊ü -$R_{a}$ ◊ú-$W_{a}$ (◊î◊ï◊ê ◊ß◊ô◊ô◊ù ◊¢◊ù ◊ê◊ï◊§◊®◊ò◊ï◊® ◊î◊®◊¶◊£ ◊ë◊ë◊ì◊ô◊ß◊î ◊õ◊ê◊ü).</p>
<p>◊ê◊§◊©◊® ◊ú◊†◊°◊ó◊™ ◊ñ◊î ◊õ◊õ◊î: $R \to_{\textrm{rmw}} W$  ◊ï◊ñ◊î ◊ê◊ï◊û◊® ◊©◊õ◊©- <code>W'</code> ◊î◊ï◊ê ◊õ◊™◊ô◊ë◊î ◊ú◊§◊†◊ô <code>W</code> ◊ê◊ñ <strong>◊ú◊ê ◊ß◊ï◊®◊î</strong> ◊©-<code>R</code> ◊ß◊ï◊®◊ê ◊û◊™◊ï◊ö ◊î◊õ◊™◊ô◊ë◊î <code>W'</code>. ◊ï◊ú◊õ◊ü ◊î◊ë◊ô◊ò◊ï◊ô ◊î◊ñ◊î ◊ô◊ï◊¶◊® ◊ß◊ë◊ï◊¶◊î ◊®◊ô◊ß◊î:</p>
$$
\begin{aligned}
R \to_{\textrm{fr}} W' \ \wedge W' \ \to_{\textrm{co}} W
\end{aligned}
$$<p>◊ë-LKMM, ◊î◊ß◊©◊® <code>rmw</code> ◊û◊ó◊ë◊® ◊ê◊™ ◊ê◊ô◊®◊ï◊¢◊ô ◊î◊ß◊®◊ô◊ê◊î ◊ï◊î◊õ◊™◊ô◊ë◊î ◊î◊û◊®◊õ◊ô◊ë◊ô◊ù ◊õ◊ú ◊¢◊ì◊õ◊ï◊ü ◊ê◊ò◊ï◊û◊ô. ◊ñ◊î◊ï ◊ó◊ú◊ß ◊û◊î◊ê◊ß◊°◊ô◊ï◊û◊î ◊©◊ú ◊ê◊ò◊ï◊û◊ô◊ï◊™ ◊ë◊û◊ï◊ì◊ú ◊î-LKMM, ◊ê◊©◊® ◊û◊ë◊ò◊ô◊ó◊î ◊ê◊™ ◊î◊ß◊ï◊î◊®◊†◊ò◊ô◊ï◊™ ◊©◊ú ◊î◊§◊¢◊ï◊ú◊î ◊î◊ê◊ò◊ï◊û◊ô◊™.</p>
<p>◊ë◊†◊ï◊°◊£, ◊¢◊ì◊õ◊ï◊†◊ô <code>rmw</code> ◊ê◊ò◊ï◊û◊ô◊ô◊ù ◊û◊û◊ú◊ê◊ô◊ù ◊™◊§◊ß◊ô◊ì ◊†◊ï◊°◊£ ◊ë◊û◊ï◊ì◊ú ◊î-LKMM: ◊î◊ù ◊ô◊õ◊ï◊ú◊ô◊ù ◊ú◊ô◊¶◊ï◊® &ldquo;◊®◊¶◊§◊ô <code>rmw</code>&rdquo;. ◊®◊¶◊£ <code>rmw</code> ◊î◊ï◊ê ◊°◊ì◊®◊™ ◊¢◊ì◊õ◊ï◊†◊ô◊ù ◊ê◊ò◊ï◊û◊ô◊ô◊ù ◊©◊ë◊î ◊õ◊ú ◊¢◊ì◊õ◊ï◊ü ◊ß◊ï◊®◊ê ◊û◊î◊¢◊ì◊õ◊ï◊ü ◊î◊ß◊ï◊ì◊ù ◊ú◊ï. ◊õ◊ê◊©◊® ◊ê◊†◊ï ◊û◊ô◊ô◊¶◊í◊ô◊ù ◊ê◊™ ◊î◊®◊¶◊§◊ô◊ù ◊î◊ê◊ú◊ï ◊ë◊ê◊û◊¶◊¢◊ï◊™ ◊ê◊ô◊®◊ï◊¢◊ô◊ù, ◊ñ◊î ◊û◊™◊ï◊ê◊® ◊õ◊ö:</p>
$$
W_{Z_{0}} \to_{\textrm{rf}} R_{Y_{1}} \to_{\textrm{rmw}} W_{Z_{1}} \to_{\textrm{rf}} ...\to_{\textrm{rf}} R_{Y_{n}} \to_{\textrm{rmw}} W_{Z_{n}}
$$<p>◊ë◊û◊©◊û◊¢◊ï◊™ ◊ñ◊ï:</p>
<ul>
<li>◊î-<code>Z0</code> ◊î◊ï◊ê ◊ê◊ô◊®◊ï◊¢ store ◊õ◊ú◊©◊î◊ï ◊ï-n ◊ô◊õ◊ï◊ú ◊ú◊î◊ô◊ï◊™ ◊õ◊ú ◊û◊°◊§◊® (◊í◊ù 0).</li>
<li>◊î-<code>rf</code> ◊û◊ô◊ô◊¶◊í ◊ß◊©◊® ◊©◊ú read-from ◊©◊ë◊ï ◊î◊ß◊®◊ô◊ê◊ï◊™ <code>Y1</code>, <code>Y2</code>, ◊ï◊õ◊ï&rsquo; ◊û◊™◊ë◊¶◊¢◊™ ◊û◊™◊ï◊ö ◊î◊õ◊™◊ô◊ë◊î <code>Z0</code>, <code>Z1</code>, ◊ï◊õ◊ï'.</li>
<li>◊î-<code>rmw</code> ◊û◊ô◊ô◊¶◊í ◊ê◊™ ◊î◊ß◊©◊® ◊ë◊ô◊ü ◊ß◊®◊ô◊ê◊î ◊ú◊õ◊™◊ô◊ë◊î ◊ë◊ê◊ï◊™◊ù ◊¢◊ì◊õ◊ï◊†◊ô◊ù ◊ê◊ò◊ï◊û◊ô◊ô◊ù.</li>
</ul>
<p>◊î◊®◊¶◊§◊ô◊ù ◊î◊ê◊ú◊ï ◊û◊ë◊ò◊ô◊ó◊ô◊ù ◊©◊î◊ê◊ï◊§◊ô ◊î◊ê◊ò◊ï◊û◊ô ◊©◊ú ◊î◊¢◊ì◊õ◊ï◊†◊ô◊ù ◊†◊©◊û◊®, ◊õ◊ö ◊©◊õ◊ú ◊¢◊ì◊õ◊ï◊ü ◊ô◊õ◊ï◊ú ◊ú◊¢◊ß◊ï◊ë ◊ê◊ó◊®◊ô ◊î◊¢◊ì◊õ◊ï◊ü ◊î◊ß◊ï◊ì◊ù ◊©◊ú◊ï ◊ë◊°◊ì◊® ◊î◊†◊õ◊ï◊ü.</p>
<p>◊î◊ô◊ó◊° $W_{Z_{0}} \to_{\textrm{rmw-sequence}} W_{Z}$ ◊†◊ï◊™◊ü ◊ê◊ô◊†◊ì◊ô◊ß◊¶◊ô◊î ◊ú◊õ◊ö ◊©-<code>Z0</code> ◊ï-<code>Zn</code> ◊î◊ù stores ◊ú◊ê◊ï◊™◊ï ◊û◊©◊™◊†◊î.</p>
<p>◊ú◊®◊¶◊§◊ô <code>rmw</code> ◊ô◊© ◊™◊õ◊ï◊†◊î ◊û◊ô◊ï◊ó◊ì◊™ ◊ë◊û◊ï◊ì◊ú ◊î◊ñ◊ô◊õ◊®◊ï◊ü LKMM: ◊î◊ù ◊ô◊õ◊ï◊ú◊ô◊ù ◊ú◊î◊®◊ó◊ô◊ë ◊ê◊™ ◊î◊ß◊©◊® <code>cumul-fence</code>. ◊õ◊ú◊ï◊û◊®, ◊ê◊ù ◊ô◊© ◊ú◊†◊ï ◊ê◊™ ◊î◊ß◊©◊®◊ô◊ù ◊î◊ë◊ê◊ô◊ù:</p>
<ul>
<li>$W_{U} \to_{\textrm{cumul-fence}} W_{X} \to_{\textrm{rmw-sequence}} W_{Y}$</li>
<li>$W_{U} \to_{\textrm{cumul-fence}} W_{Y}$</li>
</ul>
<p>◊õ◊©◊ó◊ï◊©◊ë◊ô◊ù ◊¢◊ú ◊ñ◊î ◊ë◊û◊ï◊†◊ó◊ô◊ù ◊©◊ú ◊î◊û◊ï◊ì◊ú ◊î◊ê◊ï◊§◊®◊ò◊ô◊ë◊ô, $W_{U} \to_{\textrm{cumul-fence}} W_{Y}$ ◊ê◊ï◊û◊® ◊©◊î◊õ◊™◊ô◊ë◊î <code>U</code> ◊û◊™◊§◊©◊ò◊™ ◊ú◊õ◊ú ◊û◊¢◊ë◊ì ◊ú◊§◊†◊ô ◊©◊î◊õ◊™◊ô◊ë◊î <code>X</code> ◊¢◊ï◊©◊î ◊ñ◊ê◊™. ◊ê◊ñ ◊î◊¢◊ï◊ë◊ì◊î ◊©-<code>X</code> ◊ï-<code>Y</code> ◊û◊ß◊ï◊©◊®◊ô◊ù ◊¢◊ú ◊ô◊ì◊ô ◊®◊¶◊£ rmw ◊§◊ô◊®◊ï◊©◊î ◊©-<code>U</code> ◊û◊™◊§◊©◊ò◊™ ◊í◊ù ◊ú◊õ◊ú ◊û◊¢◊ë◊ì ◊ú◊§◊†◊ô ◊©-<code>Y</code> ◊û◊™◊§◊©◊ò. ◊ë◊ê◊ï◊§◊ü ◊ê◊†◊ú◊ï◊í◊ô, ◊®◊¶◊§◊ô rmw ◊ô◊õ◊ï◊ú◊ô◊ù ◊í◊ù ◊ú◊î◊®◊ó◊ô◊ë ◊ê◊™ ◊î◊ß◊©◊® <code>w-post-bounded</code>.</p>
<p>(◊î◊®◊¢◊ô◊ï◊ü ◊©◊ú ◊®◊¶◊§◊ô rmw ◊ë-LKMM ◊ì◊ï◊û◊î, ◊ê◊ë◊ú ◊ú◊ê ◊û◊û◊© ◊ñ◊î◊î ◊ú◊ñ◊î ◊©◊ú ◊®◊¶◊§◊ô release ◊ë◊û◊ï◊ì◊ú ◊î◊ñ◊ô◊õ◊®◊ï◊ü C11. ◊î◊ù ◊†◊ï◊°◊§◊ï ◊ú-LKMM ◊õ◊ì◊ô ◊ú◊™◊ß◊ü ◊ë◊ê◊í ◊ú◊ê ◊ë◊®◊ï◊®; ◊ë◊ú◊¢◊ì◊ô◊î◊ù, ◊¢◊ì◊õ◊ï◊†◊ô◊ù ◊ê◊ò◊ï◊û◊ô◊ô◊ù ◊¢◊ù ◊°◊û◊†◊ò◊ô◊ß◊î ◊©◊ú ◊û◊ó◊°◊ï◊û◊ô◊ù-◊û◊ú◊ê◊ô◊ù ◊ú◊ê ◊™◊û◊ô◊ì ◊î◊ë◊ò◊ô◊ó◊î ◊°◊ì◊® ◊ó◊ñ◊ß ◊ú◊§◊ó◊ï◊™ ◊õ◊û◊ï ◊¢◊ì◊õ◊ï◊†◊ô◊ù ◊ê◊ò◊ï◊û◊ô◊ô◊ù ◊¢◊ù ◊°◊û◊†◊ò◊ô◊ß◊î ◊©◊ú ◊û◊ó◊°◊ï◊ù release).</p>
<h2 id="single-copy-atomicity">
  Single-copy atomicity
  <a class="heading-link" href="#single-copy-atomicity">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>◊§◊¢◊ï◊ú◊î ◊†◊ó◊©◊ë◊™ ◊ú-single-copy atomicity ◊ê◊ù ◊î◊ô◊ê ◊¢◊ï◊û◊ì◊™ ◊ë◊©◊†◊ô ◊î◊™◊†◊ê◊ô◊ù ◊î◊ë◊ê◊ô◊ù:</p>
<ol>
<li>
<p>◊ú◊ê◊ó◊® ◊û◊°◊§◊® ◊§◊¢◊ï◊ú◊ï◊™ ◊õ◊™◊ô◊ë◊î ◊ë◊ê◊ï◊™◊ï ◊í◊ï◊ì◊ú ◊ú◊ê◊ï◊™◊ï ◊û◊ô◊ß◊ï◊ù ◊ñ◊ô◊õ◊®◊ï◊ü, ◊î◊¢◊®◊ö ◊ë◊û◊ô◊ß◊ï◊ù ◊î◊ñ◊ô◊õ◊®◊ï◊ü ◊ó◊ô◊ô◊ë ◊ú◊î◊ô◊ï◊™ ◊î◊¢◊®◊ö ◊©◊†◊õ◊™◊ë ◊¢◊ú ◊ô◊ì◊ô ◊ê◊ó◊™ ◊û◊§◊¢◊ï◊ú◊ï◊™ ◊î◊õ◊™◊ô◊ë◊î. ◊õ◊ú◊ï◊û◊®, ◊ú◊ê ◊ô◊ô◊™◊õ◊ü ◊©◊ó◊ú◊ß ◊û◊î◊¢◊®◊ö ◊ë◊û◊ô◊ß◊ï◊ù ◊î◊ñ◊ô◊õ◊®◊ï◊ü ◊ô◊í◊ô◊¢ ◊û◊§◊¢◊ï◊ú◊™ ◊õ◊™◊ô◊ë◊î ◊ê◊ó◊™ ◊ï◊ó◊ú◊ß ◊ê◊ó◊® ◊ô◊í◊ô◊¢ ◊û◊§◊¢◊ï◊ú◊™ ◊õ◊™◊ô◊ë◊î ◊ê◊ó◊®◊™.</p>
</li>
<li>
<p>◊õ◊ê◊©◊® ◊û◊ë◊ï◊¶◊¢◊™ ◊§◊¢◊ï◊ú◊™ ◊ß◊®◊ô◊ê◊î ◊ï◊§◊¢◊ï◊ú◊™ ◊õ◊™◊ô◊ë◊î ◊ë◊ê◊ï◊™◊ï ◊í◊ï◊ì◊ú ◊ï◊ë◊ê◊ï◊™◊ï ◊û◊ô◊ß◊ï◊ù ◊ñ◊ô◊õ◊®◊ï◊ü, ◊î◊¢◊®◊ö ◊©◊û◊™◊ß◊ë◊ú ◊¢◊ú ◊ô◊ì◊ô ◊§◊¢◊ï◊ú◊™ ◊î◊ß◊®◊ô◊ê◊î ◊ô◊î◊ô◊î ◊ê◊ó◊ì ◊û◊î◊©◊†◊ô◊ô◊ù:</p>
<ul>
<li>◊î◊¢◊®◊ö ◊©◊ú ◊û◊ô◊ß◊ï◊ù ◊î◊ñ◊ô◊õ◊®◊ï◊ü ◊ú◊§◊†◊ô ◊ë◊ô◊¶◊ï◊¢ ◊§◊¢◊ï◊ú◊™ ◊î◊õ◊™◊ô◊ë◊î.</li>
<li>◊î◊¢◊®◊ö ◊©◊ú ◊û◊ô◊ß◊ï◊ù ◊î◊ñ◊ô◊õ◊®◊ï◊ü ◊ú◊ê◊ó◊® ◊ë◊ô◊¶◊ï◊¢ ◊§◊¢◊ï◊ú◊™ ◊î◊õ◊™◊ô◊ë◊î.</li>
</ul>
<p>◊ú◊ê ◊ô◊ô◊™◊õ◊ü ◊©◊î◊¢◊®◊ö ◊©◊ú ◊§◊¢◊ï◊ú◊™ ◊î◊ß◊®◊ô◊ê◊î ◊ô◊î◊ô◊î ◊û◊¢◊ï◊®◊ë, ◊õ◊ú◊ï◊û◊® ◊ó◊ú◊ß◊ï ◊ô◊í◊ô◊¢ ◊û◊î◊¢◊®◊ö ◊ë◊û◊ô◊ß◊ï◊ù ◊î◊ñ◊ô◊õ◊®◊ï◊ü ◊ú◊§◊†◊ô ◊§◊¢◊ï◊ú◊™ ◊î◊õ◊™◊ô◊ë◊î ◊ï◊ó◊ú◊ß◊ï ◊ô◊í◊ô◊¢ ◊û◊î◊¢◊®◊ö ◊ú◊ê◊ó◊® ◊§◊¢◊ï◊ú◊™ ◊î◊õ◊™◊ô◊ë◊î.</p>
</li>
</ol>
<p>◊õ◊ê◊©◊® ◊í◊ô◊©◊î ◊ú◊û◊ô◊ß◊ï◊ù ◊ñ◊ô◊õ◊®◊ï◊ü ◊ú◊ê single-copy atomicity, ◊î◊ô◊ê ◊û◊ë◊ï◊¶◊¢◊™ ◊õ◊®◊¶◊£ ◊©◊ú ◊í◊ô◊©◊ï◊™ ◊ß◊ò◊†◊ï◊™ ◊ô◊ï◊™◊®. ◊õ◊ú ◊ê◊ó◊™ ◊û◊î◊í◊ô◊©◊ï◊™ ◊î◊ß◊ò◊†◊ï◊™ ◊î◊ú◊ú◊ï ◊î◊ô◊ê single-copy atomicity, ◊õ◊í◊ï◊ì◊ú ◊î◊ê◊ò◊ï◊û◊ô◊ï◊™ ◊©◊î◊ê◊®◊õ◊ô◊ò◊ß◊ò◊ï◊®◊î ◊û◊°◊§◊ß◊™.</p>
<p>◊î-single-copy atomicity ◊ú◊ê ◊û◊í◊ì◊ô◊® ◊ê◊™ ◊î◊®◊í◊¢ ◊î◊û◊ì◊ï◊ô◊ß ◊©◊ë◊ï ◊î◊†◊™◊ï◊†◊ô◊ù ◊û◊™◊¢◊ì◊õ◊†◊ô◊ù. ◊î◊ó◊©◊ô◊ë◊ï◊™ ◊î◊ô◊ê ◊ú◊ï◊ï◊ì◊ê ◊©◊ê◊£ ◊û◊¢◊ë◊ì ◊ú◊ê ◊ô◊ï◊õ◊ú ◊ú◊®◊ê◊ï◊™ ◊û◊¶◊ë ◊©◊ú ◊†◊™◊ï◊†◊ô◊ù ◊û◊¢◊ï◊ì◊õ◊†◊ô◊ù ◊ó◊ú◊ß◊ô◊™. ◊ú◊ì◊ï◊í◊û◊î, ◊õ◊ê◊©◊® ◊†◊™◊ï◊†◊ô◊ù ◊õ◊û◊ï ◊®◊©◊ô◊û◊ï◊™ ◊û◊ß◊ï◊©◊®◊ï◊™ ◊¢◊©◊ï◊ô◊ô◊ù ◊ú◊î◊ô◊ï◊™ ◊û◊ë◊ï◊°◊°◊ô◊ù ◊¢◊ú ◊ô◊°◊ï◊ì◊ï◊™ ◊ê◊ò◊ï◊û◊ô◊ô◊ù ◊©◊ú 32 ◊ë◊ô◊ò◊ô◊ù, ◊¢◊ì◊õ◊ï◊ü ◊ê◊ò◊ï◊û◊ô ◊ó◊ô◊ô◊ë ◊ú◊î◊ë◊ò◊ô◊ó ◊©◊î◊¢◊®◊ö ◊©◊ú 32 ◊î◊ë◊ô◊ò◊ô◊ù ◊ô◊™◊¢◊ì◊õ◊ü ◊ë◊û◊ú◊ï◊ê◊ï ◊ë◊ï-◊ñ◊û◊†◊ô◊™. ◊ê◊ô◊ü ◊ú◊ß◊ë◊ú ◊û◊¶◊ë ◊©◊ë◊ï ◊û◊¢◊ë◊ì ◊ê◊ó◊ì ◊®◊ï◊ê◊î ◊¢◊ì◊õ◊ï◊ü ◊©◊ú 16 ◊ë◊ô◊ò◊ô◊ù ◊ë◊ú◊ë◊ì ◊ï◊ê◊ó◊® ◊õ◊ö ◊®◊ï◊ê◊î ◊ê◊™ ◊ô◊™◊® ◊î-16 ◊ë◊ô◊ò◊ô◊ù ◊û◊ê◊ï◊ó◊® ◊ô◊ï◊™◊®.</p>
<p>◊®◊ï◊ë ◊î◊ê◊®◊õ◊ô◊ò◊ß◊ò◊ï◊®◊ï◊™ ◊û◊°◊§◊ß◊ï◊™ single-copy atomicity ◊ë◊®◊û◊î ◊û◊°◊ï◊ô◊û◊™ ◊ê◊ë◊ú ◊ú◊ê ◊™◊û◊ô◊ì.</p>
<p>◊û◊ß◊®◊î ◊ë◊¢◊†◊ô◊ô◊ü ◊ë-arm ◊©◊õ◊ü ◊û◊°◊§◊ß◊™ single-copy atomicity ◊ë◊¶◊ï◊®◊î ◊û◊°◊ï◊ô◊ô◊û◊™ ◊ê◊ë◊ú ◊®◊ß ◊ú◊û◊ô◊ì◊¢ ◊®◊í◊ô◊ú ◊ï◊ú◊ê ◊ú◊î◊ï◊®◊ê◊ï◊™.
◊ú◊û◊©◊ú ◊ë-AArch64 ◊ë-branch-◊ô◊ù ◊û◊ï◊™◊†◊ô◊ù,  ◊ë◊ô◊¶◊ï◊¢ fetch ◊î◊ï◊ê ◊ú◊ê single-copy atomicity: ◊õ◊ú◊ï◊û◊® ◊î◊ë◊ô◊¶◊ï◊¢ ◊ô◊õ◊ï◊ú ◊ú◊î◊ô◊ï◊™ ◊û◊¢◊ï◊®◊ë ◊¢◊ù ◊û◊ô◊ì◊¢ ◊ô◊©◊ü ◊ï◊û◊ô◊ì◊¢ ◊ó◊ì◊© ◊ë◊ï ◊ñ◊û◊†◊ô◊™.</p>
<figure>
    <img src="/posts/atomic/atomic/fig02_W&#43;F&#43;branches.png"class="dark-image"
    ><figcaption class="image-title">fig02 W&#43;F&#43;branches from ARMv8-A system semantics: instruction fetch in relaxed architectures (inria.hal.science)</figcaption></figure><style>
  .dark-image {
    background-color: white;
  }

  .image-title {
    width: 50%;
    margin: auto;
  }
</style>
<p>◊õ◊ì◊ô ◊ú◊°◊§◊ß ◊ê◊™ ◊©◊ú◊û◊ï◊™ ◊î◊†◊™◊ï◊†◊ô◊ù ◊¶◊®◊ô◊ö ◊ú◊î◊õ◊†◊ô◊° ◊û◊ó◊°◊ï◊û◊ô◊ù ◊ï◊ú◊ë◊¶◊¢ ◊§◊¢◊ï◊ú◊ï◊™ cache maintenance ◊û◊™◊ê◊ô◊û◊ï◊™.</p>
<h2 id="◊ì◊®◊õ◊ô-◊ô◊¢◊ï◊ú-◊ë◊ú◊ô◊†◊ï◊ß◊°">
  ◊ì◊®◊õ◊ô ◊ô◊¢◊ï◊ú ◊ë◊ú◊ô◊†◊ï◊ß◊°
  <a class="heading-link" href="#%d7%93%d7%a8%d7%9b%d7%99-%d7%99%d7%a2%d7%95%d7%9c-%d7%91%d7%9c%d7%99%d7%a0%d7%95%d7%a7%d7%a1">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>◊ë◊ú◊ô◊†◊ï◊ß◊° ◊õ◊ì◊ô ◊ú◊ô◊¢◊ú ◊§◊¢◊ï◊ú◊ï◊™ ◊ê◊ò◊ï◊û◊ô◊ï◊™ ◊ô◊© ◊ê◊™ <code>local_t</code>◊©◊î◊ï◊ê ◊°◊ï◊í ◊û◊ô◊ï◊ó◊ì ◊©◊ú ◊û◊©◊™◊†◊î ◊©◊û◊ò◊§◊ú ◊ë◊ê◊ò◊ï◊û◊ô◊ù ◊û◊ß◊ï◊û◊ô◊ô◊ù.</p>
<p>◊î◊§◊¢◊ï◊ú◊ï◊™ ◊î◊ê◊ò◊ï◊û◊ô◊ï◊™ ◊î◊û◊ß◊ï◊û◊ô◊ï◊™ ◊†◊ï◊¢◊ì◊ï ◊ú◊°◊§◊ß ◊§◊™◊®◊ï◊ü ◊û◊î◊ô◊® ◊ï◊ô◊¢◊ô◊ú ◊ú◊û◊ô◊û◊ï◊© ◊û◊ï◊†◊ô◊ù ◊ë◊û◊¢◊ë◊ì, ◊™◊ï◊ö ◊¶◊û◊¶◊ï◊ù ◊¢◊ú◊ï◊ô◊ï◊™ ◊î◊ë◊ô◊¶◊ï◊¢ ◊î◊†◊ú◊ï◊ï◊™ ◊ú◊§◊¢◊ï◊ú◊ï◊™ ◊ê◊ò◊ï◊û◊ô◊ï◊™ ◊°◊ò◊†◊ì◊®◊ò◊ô◊ï◊™. ◊ë-x86, ◊§◊¢◊ï◊ú◊ï◊™ ◊ê◊ú◊î ◊û◊©◊ô◊í◊ï◊™ ◊ê◊™ ◊î◊ë◊ô◊¶◊ï◊¢◊ô◊ù ◊î◊û◊ï◊í◊ë◊®◊ô◊ù ◊¢◊ú ◊ô◊ì◊ô ◊î◊°◊®◊™ ◊ß◊ô◊ì◊ï◊û◊™ ◊î-LOCK, ◊ê◊©◊® ◊†◊ì◊®◊©◊™ ◊ë◊ì◊®◊ö ◊õ◊ú◊ú ◊ú◊°◊†◊õ◊®◊ï◊ü ◊ë◊ô◊ü ◊û◊¢◊ë◊ì◊ô◊ù, ◊ï◊õ◊ü ◊¢◊ú ◊ô◊ì◊ô ◊ë◊ô◊ò◊ï◊ú ◊î◊¶◊ï◊®◊ö ◊ë◊û◊ó◊°◊ï◊û◊ô ◊ñ◊ô◊õ◊®◊ï◊ü.</p>
<p>◊©◊ô◊û◊ï◊© ◊ë◊û◊ï◊†◊ô◊ù ◊ê◊ò◊ï◊û◊ô◊ô◊ù ◊û◊ß◊ï◊û◊ô◊ô◊ù ◊û◊ê◊§◊©◊® ◊ú◊î◊ô◊û◊†◊¢ ◊û◊î◊©◊ë◊™◊™ interrupt-◊ô◊ù ◊ú◊¶◊ï◊®◊ö ◊î◊í◊†◊î ◊û◊§◊†◊ô ◊î◊§◊®◊¢◊ï◊™ ◊û◊¶◊ì ◊û◊ò◊§◊ú◊ô interrupt-◊ô◊ù, ◊ï◊û◊°◊§◊ß ◊ß◊ï◊î◊®◊†◊ò◊ô◊ï◊™ ◊ú◊û◊ï◊†◊ô◊ù ◊í◊ù ◊ë◊û◊ß◊®◊ô◊ù ◊©◊ú NMI handlers. ◊™◊õ◊ï◊†◊ï◊™ ◊ê◊ú◊ï ◊î◊ï◊§◊õ◊ï◊™ ◊ê◊™ ◊î◊©◊ô◊û◊ï◊© ◊ë◊§◊¢◊ï◊ú◊ï◊™ ◊ê◊ú◊î ◊ú◊®◊ú◊ï◊ï◊†◊ò◊ô ◊ë◊û◊ô◊ï◊ó◊ì ◊¢◊ë◊ï◊® ◊û◊¢◊ß◊ë ◊ï◊†◊ô◊ò◊ï◊® ◊ë◊ô◊¶◊ï◊¢◊ô◊ù.</p>
<p>◊ó◊©◊ï◊ë ◊ú◊¶◊ô◊ô◊ü ◊õ◊ô ◊î◊§◊¢◊ï◊ú◊ï◊™ ◊î◊ê◊ò◊ï◊û◊ô◊ï◊™ ◊î◊û◊ß◊ï◊û◊ô◊ï◊™ ◊û◊ë◊ò◊ô◊ó◊ï◊™ ◊ê◊ò◊ï◊û◊ô◊ï◊™ ◊ê◊ö ◊ï◊®◊ß ◊¢◊ë◊ï◊® ◊©◊ô◊†◊ï◊ô◊ô◊ù ◊©◊û◊™◊ë◊¶◊¢◊ô◊ù ◊¢◊ú ◊ô◊ì◊ô ◊ê◊ï◊™◊ï ◊î◊û◊¢◊ë◊ì ◊©◊ë◊ë◊¢◊ú◊ï◊™◊ï ◊î◊†◊™◊ï◊†◊ô◊ù. ◊ú◊õ◊ü, ◊ô◊© ◊ú◊ï◊ï◊ì◊ê ◊©◊û◊¢◊ë◊ì ◊ô◊ó◊ô◊ì ◊î◊ï◊ê ◊ñ◊î ◊©◊û◊ë◊¶◊¢ ◊õ◊™◊ô◊ë◊î ◊ú◊û◊©◊™◊†◊ô◊ù ◊û◊°◊ï◊í <code>local_t</code>. ◊ú◊©◊ù ◊õ◊ö, ◊û◊©◊™◊û◊©◊ô◊ù ◊ë◊†◊™◊ï◊†◊ô◊ù ◊§◊®◊ò◊ô◊ô◊ù ◊ú◊õ◊ú ◊û◊¢◊ë◊ì ◊ï◊û◊ï◊ï◊ì◊ê◊ô◊ù ◊©◊î◊©◊ô◊†◊ï◊ô◊ô◊ù ◊û◊™◊ë◊¶◊¢◊ô◊ù ◊û◊™◊ï◊ö ◊ß◊ï◊†◊ò◊ß◊°◊ò preemption safe. ◊¢◊ù ◊ñ◊ê◊™, ◊ß◊®◊ô◊ê◊î ◊ú◊û◊©◊™◊†◊ô <code>local_t</code> ◊ê◊§◊©◊®◊ô◊™ ◊û◊õ◊ú ◊û◊¢◊ë◊ì ◊ê◊ó◊®, ◊ê◊ö ◊ô◊ô◊™◊õ◊ü ◊©◊ß◊®◊ô◊ê◊ï◊™ ◊ê◊ú◊ï ◊ô◊ó◊©◊§◊ï ◊ê◊™ ◊î◊†◊™◊ï◊†◊ô◊ù ◊û◊ó◊ï◊• ◊ú◊°◊ì◊® (out of order), ◊ë◊¢◊ß◊ë◊ï◊™ ◊õ◊™◊ô◊ë◊î ◊©◊ú ◊ñ◊ô◊õ◊®◊ï◊ü ◊ê◊ó◊® ◊û◊î◊û◊¢◊ë◊ì ◊©◊ë◊ë◊¢◊ú◊ï◊™◊ï ◊î◊†◊™◊ï◊†◊ô◊ù.</p>
<h3 id="◊ô◊ô◊©◊ï◊ù-◊¢◊ë◊ï◊®-◊ê◊®◊õ◊ô◊ò◊ß◊ò◊ï◊®◊î-◊°◊§◊¶◊ô◊§◊ô◊™">
  ◊ô◊ô◊©◊ï◊ù ◊¢◊ë◊ï◊® ◊ê◊®◊õ◊ô◊ò◊ß◊ò◊ï◊®◊î ◊°◊§◊¶◊ô◊§◊ô◊™
  <a class="heading-link" href="#%d7%99%d7%99%d7%a9%d7%95%d7%9d-%d7%a2%d7%91%d7%95%d7%a8-%d7%90%d7%a8%d7%9b%d7%99%d7%98%d7%a7%d7%98%d7%95%d7%a8%d7%94-%d7%a1%d7%a4%d7%a6%d7%99%d7%a4%d7%99%d7%aa">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>◊õ◊ì◊ô ◊ú◊û◊û◊© ◊§◊¢◊ï◊ú◊ï◊™ ◊ê◊ò◊ï◊û◊ô◊ï◊™ ◊û◊ß◊ï◊û◊ô◊ï◊™ ◊ë◊ê◊®◊õ◊ô◊ò◊ß◊ò◊ï◊®◊î ◊û◊°◊ï◊ô◊û◊™, ◊†◊ô◊™◊ü ◊ú◊ë◊¶◊¢ ◊î◊™◊ê◊û◊ï◊™ ◊ß◊ú◊ï◊™ ◊ú◊§◊¢◊ï◊ú◊ï◊™ ◊î◊ê◊ò◊ï◊û◊ô◊ï◊™ ◊î◊°◊ò◊†◊ì◊®◊ò◊ô◊ï◊™. ◊ë◊ì◊®◊ö ◊õ◊ú◊ú, ◊ñ◊î ◊õ◊ï◊ú◊ú ◊©◊û◊ô◊®◊î ◊©◊ú ◊í◊®◊°◊™ ◊î-uniprocessor ◊©◊ú◊î◊ü ◊ë◊ú◊ë◊ì. ◊ë◊ô◊ô◊©◊ï◊ù ◊ñ◊î, ◊î◊û◊©◊û◊¢◊ï◊™ ◊î◊ô◊ê ◊î◊°◊®◊î ◊©◊ú ◊ß◊ô◊ì◊ï◊û◊™ ◊î-LOCK (◊ë◊ê◊®◊õ◊ô◊ò◊ß◊ò◊ï◊®◊ï◊™ ◊õ◊û◊ï i386 ◊ï-x86_64) ◊ï◊î◊°◊®◊î ◊©◊ú ◊û◊ó◊°◊ï◊û◊ô◊ù ◊©◊†◊ì◊®◊©◊ô◊ù ◊¢◊ë◊ï◊® ◊û◊¢◊®◊õ◊ï◊™ SMP .</p>

        
        
        
          
        

        

      </div>
      <footer>
        
  <h3 dir="rtl">
    ◊û◊ß◊ï◊®◊ï◊™
  </h3>
  <ul dir="ltr">
    
    
      
        
          
        
      
    
      
        
          
        
      
    
      
        
          
        
      
    
      
        
          
        
      
    
      
        
          
        
      
    
      
        
          
        
      
    
      
        
          
        
      
    
      
        
          
        
      
    
      
        
          
        
      
    
      
        
          
        
      
    
      
        
          
        
      
    
      
        
          
        
      
    
      
        
          
        
      
    
      
        
          
        
      
    
    
      <li>
        <a href="https://lwn.net/Articles/256433/">https://lwn.net/Articles/256433/</a>
      </li>
    
      <li>
        <a href="https://github.com/torvalds/linux/blob/v5.10/Documentation/core-api/atomic_ops.rst">https://github.com/torvalds/linux/blob/v5.10/Documentation/core-api/atomic_ops.rst</a>
      </li>
    
      <li>
        <a href="https://www.joelfernandes.org/resources/lkmm_herd7.pdf">https://www.joelfernandes.org/resources/lkmm_herd7.pdf</a>
      </li>
    
      <li>
        <a href="https://mirrors.edge.kernel.org/pub/linux/kernel/people/paulmck/LWNLinuxMM/StrongModel.html">https://mirrors.edge.kernel.org/pub/linux/kernel/people/paulmck/LWNLinuxMM/StrongModel.html</a>
      </li>
    
      <li>
        <a href="https://preshing.com/20130618/atomic-vs-non-atomic-operations/">https://preshing.com/20130618/atomic-vs-non-atomic-operations/</a>
      </li>
    
      <li>
        <a href="https://krinkinmu.github.io/2024/04/20/arm-synchronization.html">https://krinkinmu.github.io/2024/04/20/arm-synchronization.html</a>
      </li>
    
      <li>
        <a href="https://github.com/torvalds/linux/blob/master/tools/memory-model/Documentation/explanation.txt">https://github.com/torvalds/linux/blob/master/tools/memory-model/Documentation/explanation.txt</a>
      </li>
    
      <li>
        <a href="https://pages.cs.wisc.edu/~markhill/papers/primer2020_2nd_edition.pdf">https://pages.cs.wisc.edu/~markhill/papers/primer2020_2nd_edition.pdf</a>
      </li>
    
      <li>
        <a href="https://developer.arm.com/documentation/ihi0050/latest/">https://developer.arm.com/documentation/ihi0050/latest/</a>
      </li>
    
      <li>
        <a href="https://www.amd.com/content/dam/amd/en/documents/processor-tech-docs/programmer-references/24593.pdf">https://www.amd.com/content/dam/amd/en/documents/processor-tech-docs/programmer-references/24593.pdf</a>
      </li>
    
      <li>
        <a href="https://inria.hal.science/hal-02509910/document">https://inria.hal.science/hal-02509910/document</a>
      </li>
    
      <li>
        <a href="https://developer.arm.com/documentation/ddi0406/c/Application-Level-Architecture/Application-Level-Memory-Model/Memory-types-and-attributes-and-the-memory-order-model/Atomicity-in-the-ARM-architecture?lang=en#CHDHGEIE">https://developer.arm.com/documentation/ddi0406/c/Application-Level-Architecture/Application-Level-Memory-Model/Memory-types-and-attributes-and-the-memory-order-model/Atomicity-in-the-ARM-architecture?lang=en#CHDHGEIE</a>
      </li>
    
      <li>
        <a href="https://developer.arm.com/documentation/ihi0022/e/">https://developer.arm.com/documentation/ihi0022/e/</a>
      </li>
    
      <li>
        <a href="https://docs.kernel.org/core-api/local_ops.html">https://docs.kernel.org/core-api/local_ops.html</a>
      </li>
    
  </ul>


        

<section class="see-also">
  
    
    
    
      <h3 id="◊®◊ï◊ê◊î-◊¢◊ï◊ì-◊ë-atomic" dir="rtl">        ◊®◊ï◊ê◊î ◊¢◊ï◊ì ◊ë atomic
        <a class="heading-link" href="#%d7%a8%d7%95%d7%90%d7%94-%d7%a2%d7%95%d7%93-%d7%91-atomic">
          <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
          <span class="sr-only">Link to heading</span>
        </a>
      </h3>
      <nav>
        <ul>
        
        
          
            <li>
              <a href="/he/posts/atomic/x86-lock/">x86 Lock</a>
            </li>
          
        
          
            <li>
              <a href="/he/posts/atomic/exclusive/">Exclusive</a>
            </li>
          
        
          
        
        </ul>
      </nav>
    
  
</section>


        
        
        
        
        
        
        
      </footer>
    </article>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css"
    integrity="sha384-vKruj+a13U8yHIkAyGgK1J3ArTLzrFGBbBc0tDp4ad/EyewESeXE/Iv67Aj8gKZ0" crossorigin="anonymous">
  
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.js"
    integrity="sha384-PwRUT/YqbnEjkZO0zZxNqcxACrXe+j766U2amXcgMg5457rve2Y7I6ZJSm2A0mS4" crossorigin="anonymous"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/contrib/auto-render.min.js"
    integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous"
    onload="renderMathInElement(document.body,
      {
        delimiters: [
          {left: '$$', right: '$$', display:true},
          {left: '$', right: '$', display:false},
          {left: '\\(', right: '\\)', display: false},
          {left: '\\[', right: '\\]', display: true}
        ]
      }
    );"></script><style>
  .katex {
    direction: ltr;
    display: inline-flex;
    flex-direction: row-reverse;
    unicode-bidi: embed;
  }
</style>
  </section>

    </div>

    <footer class="footer">
  <section class="container">
    ¬©
    
    2025
     Michael Shalitin 
    ¬∑
    
    ◊û◊ï◊§◊¢◊ú ◊¢◊ú ◊ô◊ì◊ô <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> & <a href="https://github.com/luizdepra/hugo-coder/" target="_blank" rel="noopener">Coder</a>.
    
  </section>
</footer>

  </main>

  

  
  
  <script src="/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js" integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script>
  

  

  


  

  

  

  

  
<script defer src='https://static.cloudflareinsights.com/beacon.min.js'
        data-cf-beacon='{"token": "316bf5f2576c4cb68b54c0b2a91cb739"}'></script>



  

  

  

  

  

  

  

  

  

  

  

  
</body>
</html>
